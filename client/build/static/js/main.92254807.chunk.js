(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e){e.exports=[{municipios:[],name:"Adalberto",surName:"Stanley",email:"adalberto.alves@agenciarmbh.mg.gov.br",cau:"A51846-8"},{municipios:["Betim","Contagem","Esmeraldas","Florestal","Juatuba","Ribeir\xe3o das Neves"],name:"Ananda",surName:"Camargo",email:"ananda.silva@agenciarmbh.mg.gov.br",cau:"A70787-2"},{municipios:[],name:"Fabr\xedcio",surName:"Pallione",email:"fabricio.avelar@agenciarmbh.mg.gov.br",cau:"A94523-4"},{municipios:["Brumadinho","Igarap\xe9","Itaguara","Itatiaiu\xe7u","Mateus Leme","Rio Manso","S\xe3o Joaquim de Bicas"],name:"Fl\xe1vio",surName:"Neves",email:"flavio.neves@agenciarmbh.mg.gov.br",cau:"A21460-4"},{municipios:["Caet\xe9","Jaboticatubas","Nova Uni\xe3o","Sabar\xe1","Santa Luzia","Taquara\xe7u de Minas","Vespasiano"],name:"Gabriela",surName:"Mara",email:"gabriela.batista@agenciarmbh.mg.gov.br",cau:"213171-4"},{municipios:["Baldim","Confins","Capim Branco","Lagoa Santa","Matozinhos","Pedro Leopoldo","S\xe3o Jos\xe9 da Lapa"],name:"Viviane",surName:"Cota",email:"viviane.cota@agenciarmbh.mg.gov.br",cau:"A44546-0"},{municipios:["Belo Horizonte","Ibirit\xe9","M\xe1rio Campos","Nova Lima","Raposos","Rio Acima","Sarzedo"],name:"S\xedlvia",surName:"Gramiscelli",email:"silvia.reis@agenciarmbh.mg.gov.br",cau:"210980-8"}]},107:function(e,t,a){},109:function(e){e.exports=[{SETOR:"Secretaria de Meio Ambiente",nome:"Cl\xe1udia de Castro Rosa",cargo:"Secret\xe1ria de Meio Ambiente",vocativo1:"Exma. Senhora",vocativo2:"Senhora Secret\xe1ria",endereco:"Rua Vitalino Augusto, 635 - Centro",cep:" 35.706-000 ",municipio:"Baldim",EMAIL:"m.ambiente@baldim.mg.gov.br","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Pol\xedtica Urbana",nome:"Maria Fernandes Caldas",cargo:"Secret\xe1ria Municipal de Pol\xedtica Urbana",vocativo1:"Exma. Senhora",vocativo2:"Senhora Secret\xe1ria",endereco:"Av. Afonso Pena, 4000, 4\xb0 andar - Cruzeiro",cep:" 30.130-009 ",municipio:"Belo Horizonte",EMAIL:"smaru@pbh.gov.br ","TELEFONE 1":"32775050","CONTATO 1":"Tamires","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Finan\xe7as, Planejamento, Gest\xe3o e Obras P\xfablicas (SEFPLAG)",nome:"Marco T\xfalio de Freitas Rezende Lara",cargo:"Diretor de Pol\xedticas Urbanas (DPURB)",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Diretor",endereco:"Rua Par\xe1 de Minas, 640 - Brasil\xe9ia",cep:" 32.600-412 ",municipio:"Betim",EMAIL:"-","TELEFONE 1":"35123227","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Planejamento e Coordena\xe7\xe3o",nome:"V\xe2nia Alves Est\xe9v\xe3o",cargo:"Secret\xe1ria de Planejamento e Coordena\xe7\xe3o",vocativo1:"Exma. Senhora",vocativo2:"Senhora Secret\xe1ria",endereco:"Rua Presidente Kennedy, 20, 3\xba andar - Bairro S\xe3o Sebasti\xe3o",cep:" 35.460-000 ",municipio:"Brumadinho",EMAIL:"fundiario.smp@brumadinho.mg.gov.br","TELEFONE 1":"35711385","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Muncipal de Obras",nome:"J\xfalio C\xe9sar Batista",cargo:"Secret\xe1rio de Obras",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Rua Raul Franco, S/N\xba - Centro",cep:" 34.800-000 ",municipio:"Caet\xe9",EMAIL:"obras@caete.mg.gov.br","TELEFONE 1":"36513234","CONTATO 1":"Josimara","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Prefeitura Municipal",nome:"Elmo Alves do Nascimento",cargo:"Prefeito Municipal",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Pra\xe7a Jorge Ferreira Pinto, 20 - Centro",cep:" 35.730-000 ",municipio:"Capim Branco",EMAIL:"segovadm@capimbranco.mg.gov.br","TELEFONE 1":"37131420","CONTATO 1":"J\xe9ssica","TELEFONE 2":"98711725","CONTATO 2":"Jean"},{SETOR:"Secret\xe1ria Municipal de Desenvolvimento Econ\xf4mico e Urbano",nome:"Rodrigo Costa Andrade",cargo:"Secret\xe1rio de Desenvolvimento Econ\xf4mico e Urbano",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Rua Gustavo Rodrigues, 265 - Centro",cep:" 33.500-000 ",municipio:"Confins",EMAIL:"-","TELEFONE 1":"36860304","CONTATO 1":"Rodrigo","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Desenvolvimento Urbano e Habita\xe7\xe3o",nome:"Ivayr Nunes Soalheiro",cargo:"Secret\xe1rio de de Desenvolvimento Urbano e Habita\xe7\xe3o",vocativo1:"Ilmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Av. Jo\xe3o C\xe9sar de Oliveira, 1410 - Eldorado",cep:" 32.310-000",municipio:"Contagem",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria de Obras",nome:"Samantha Santana",cargo:"-",vocativo1:"Exma. Senhora",vocativo2:"Senhora Secret\xe1ria",endereco:"Av. Jo\xe3o C\xe9sar de Oliveira, 1410 - Eldorado",cep:" 32.310-000",municipio:"Contagem",EMAIL:"samantha.santanna@contagem.mg.gov.br","TELEFONE 1":"33912168","CONTATO 1":"Daniela","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Obras, Transporte e Tr\xe2nsito",nome:"Bernardo Felipe Baudson Fran\xe7a Costa",cargo:"Secret\xe1rio de Obras, Transporte e Tr\xe2nsito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Rua dos Expedicion\xe1rios, 09 - Centro",cep:" 35.740-000 ",municipio:"Esmeraldas",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Otoni Alves de Oliveira Melo",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Rua Benedito Valadares, 243 - Centro",cep:" 35.690-000 ",municipio:"Florestal",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Obras e Urbanismo",nome:"Andr\xe9 Lima Belico",cargo:"Secret\xe1rio de Obras e Urbanismo",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Rua Arthur Campos, 906 - Alvorada",cep:" 32.400-000 ",municipio:"Ibirit\xe9",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Infraestrutura e Servi\xe7os Urbanos",nome:"Witor Aparecido Ribeiro Campos",cargo:"Secret\xe1rio de Infraestrutura e Servi\xe7os Urbanos",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Avenida Governador Valadares, 325 - Centro",cep:" 32.900-000",municipio:"Igarap\xe9",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Prefeitura Municipal",nome:"Ana Cec\xedlia Sorrenti Bahia",cargo:"Arquiteta e Urbanista",vocativo1:"Exma. Senhora",vocativo2:"Senhora Arquiteta",endereco:"Rua Padre Greg\xf3rio, 187 - Centro",cep:" 35.514-000 ",municipio:"Itaguara",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria de Infraestrutura e Urbanismo",nome:"Mariana Midori Miyamoto Martins",cargo:"Secret\xe1ria de Infraestrutura e Urbanismo",vocativo1:"Exma. Senhora",vocativo2:"Senhora Secret\xe1ria",endereco:"Pra\xe7a Ant\xf4nio Quirino da Silva, 404 - Centro",cep:" 35.685-000 ",municipio:"Itatiaiu\xe7u",EMAIL:"siema@itatiaiucu.mg.gov.br/obrasec@itatiaiucu.mg.gov.br","TELEFONE 1":"35721244","CONTATO 1":"Sandra","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Seguran\xe7a Social e Meio Ambiente",nome:"Alberto Gomes Filho",cargo:"Secret\xe1rio Municipal de Seguridade Social e Meio Ambiente ",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Pra\xe7a Nossa Senhora da Concei\xe7\xe3o, 38 - Centro",cep:" 35.830-000 ",municipio:"Jaboticatubas",EMAIL:"meioambiente@jaboticatubas.mg.gov.br ","TELEFONE 1":"36831233","CONTATO 1":"Marcelly","TELEFONE 2":"36831218","CONTATO 2":"Alberto"},{SETOR:"Prefeitura Municipal",nome:"Val\xe9ria Aparecida dos Santos",cargo:"Prefeita Municipal",vocativo1:"Exma. Senhora",vocativo2:"Senhora Prefeita",endereco:"Pra\xe7a dos Tr\xeas Poderes, s/n\xba - Centro",cep:" 35.675-000 ",municipio:"Juatuba",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Desenvolvimento Urbano",nome:"Breno Salom\xe3o Gomes",cargo:"Secret\xe1rio Municipal de Desenvolvimento Urbano ",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Rua Bar\xe3o do Rio Branco, 44, 2\xba andar - Centro",cep:" 33.400-000 ",municipio:"Lagoa Santa",EMAIL:"ericapatricia@lagoasanta.mg.gov.br","TELEFONE 1":"3517","CONTATO 1":"Erica Patricia","TELEFONE 2":"-","CONTATO 2":"Erica Abreu ou Larissa"},{SETOR:"Prefeitura Municipal",nome:"Elson da Silva Santos J\xfanior",cargo:"Prefeito Municipal",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Av. Governador Magalh\xe3es Pinto, 320 - Centro",cep:" 32.470-000 ",municipio:"M\xe1rio Campos",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria de Meio Ambiente",nome:"Rosil\xe2ndia Maia",cargo:"Secret\xe1ria de Meio Ambiente",vocativo1:"Exma. Senhora",vocativo2:"Senhora Secret\xe1ria",endereco:"Rua Pereira Guimar\xe3es, 08 - Centro",cep:" 35.670-000 ",municipio:"Mateus Leme",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Ant\xf4nio Divino de Souza",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Rua Dolores de Oliveira Silva, 108 - Centro",cep:" 35.720-000 ",municipio:"Matozinhos",EMAIL:"andregon2005@gmail.com","TELEFONE 1":"37125538","CONTATO 1":"Cl\xe1udia","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Departamento de Cartografia",nome:"H\xe9lio de Souza Muniz",cargo:"Diretor do Departamento de Cartografia",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Diretor",endereco:"Pra\xe7a Bernardino de Lima, 80 - Centro",cep:" 34.000-000 ",municipio:"Nova Lima",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Ailton Ant\xf4nio Guimar\xe3es Rosa",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Rua Pres. Kennedy, 29 - Centro",cep:" 34.990-000",municipio:"Nova Uni\xe3o",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Municipal de Planejamento Urbano",nome:"Jo\xe3o Luiz Pereira Issa",cargo:"Secret\xe1rio de Planejamento Urbano",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Rua Dr. Cristiano Otoni, 555 - Centro",cep:" 33.600-000 ",municipio:"Pedro Leopoldo",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Sergio Silveira Soares",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Pra\xe7a da Matriz, 64 - Centro",cep:" 34.400-000",municipio:"Raposos",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria Muncipal de Planejamento e Urbanismo",nome:"Cristiano Novais Barduino",cargo:"Superintendente de Ordena\xe7\xe3o Territorial",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Superintendente",endereco:"Rua Ari Teixeira da Costa, 1.100 - Savassi",cep:" 33.880-630 ",municipio:"Ribeir\xe3o das Neves",EMAIL:"regulacaourbana@ribeiraodasneves.mg.gov.br","TELEFONE 1":"(31) 36276927","CONTATO 1":"Cristiano","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria de Obras e Transportes",nome:"Walmir do Carmo Santos J\xfanior",cargo:"Diretor de Obras",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Diretor",endereco:"Rua Ant\xf4nio Carlos, 40 - Centro",cep:" 34.300-000 ",municipio:"Rio Acima",EMAIL:"obras.supervisao@prefeiturarioacima.mg.gov.br","TELEFONE 1":"(31) 34541286","CONTATO 1":"solicitar ramal de obras","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Adair Dornas dos Santos",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Pra\xe7a Fortunato Campos, 46 - Centro",cep:" 35.525-000 ",municipio:"Rio Manso",EMAIL:"dpriomanso@gmail.com","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Wander Jos\xe9 Goddad Borges",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Rua Dom Pedro II, 200 - Centro",cep:" 34.600-000 ",municipio:"Sabar\xe1",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Christiano Xavier ",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Avenida VIII, 50 - Carreira Cumprida",cep:" 33.045-090 ",municipio:"Santa Luzia",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Ant\xf4nio Augusto Resende Maia",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Avenida Jos\xe9 Gabriel de Resende, 340 - Tereza Cristina",cep:" 32.920-000 ",municipio:"S\xe3o Joaquim de Bicas",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Diego Alvaro dos Santos Silva",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Rua Idalina Alves,179 - Centro",cep:" 33.350-000 ",municipio:"S\xe3o Jos\xe9 da Lapa",EMAIL:"planejamento@saojosedalapa.mg.gov.br","TELEFONE 1":"36231200","CONTATO 1":"Sergio","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Secretaria de Planejamento",nome:"Jarbas Vieira da Silva",cargo:"Secret\xe1rio de Planejamento",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Secret\xe1rio",endereco:"Rua Eloy C\xe2ndido de Melo, 477 - Centro",cep:" 32.450-000 ",municipio:"Sarzedo",EMAIL:"planejamento@sarzedo.mg.gov.br","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Alcides Hipolito da Assun\xe7\xe3o Ferreira Filho",cargo:"Prefeito",vocativo1:"Exmo. Senhor",vocativo2:"Senhor Prefeito",endereco:"Rua Dr. Tancredo de Almeida Neves, 225 - Centro ",cep:" 33.980-000",municipio:"Taquara\xe7u de Minas",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"},{SETOR:"Gabinete",nome:"Ilce Alves Rocha Perdig\xe3o",cargo:"Prefeita",vocativo1:"Exma. Senhora",vocativo2:"Senhora Prefeita",endereco:"Av. Prefeito Sebasti\xe3o Fernandes, 479 - Centro",cep:" 33.200-000 ",municipio:"Vespasiano",EMAIL:"-","TELEFONE 1":"-","CONTATO 1":"-","TELEFONE 2":"-","CONTATO 2":"-"}]},114:function(e,t,a){e.exports=a(310)},307:function(e,t,a){},309:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(28),o=a.n(i),s=a(7),l=a(8),c=a(102),d=a.n(c),m=a(103),u=a.n(m),p=a(104),h=a(2),E={empCollection:[],rtCollection:[],processCollection:[],filesCollection:[],tecCollection:[],id:"",nome:"",cpf:"",rua:"",bairro:"",cep:"",cidade:"",phone:"",email:"",numero:"",complemento:"",uf:"",nomeRt:"",emailRt:"",phoneRt:"",nProcesso:"",loadedData:{},empMatch:"",rtMatch:"",empId:"",editItem:!1,search:"",setColor:"",loading:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_EMP_DATA":return Object(h.a)({},e,{empCollection:t.payload});case"LOAD_RT_DATA":return Object(h.a)({},e,{rtCollection:t.payload});case"LOAD_PROCESS_DATA":return Object(h.a)({},e,{processCollection:t.payload});case"LOAD_FILES_DATA":return Object(h.a)({},e,{filesCollection:t.payload});case"LOAD_TECNICOS":return Object(h.a)({},e,{tecCollection:t.payload});case"SET_COLOR":return Object(h.a)({},e,{setColor:t.payload});case"LOADING":return Object(h.a)({},e,{loading:t.payload});default:return e}},f={},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FIND_EMP_ID":return Object(h.a)({},e,{empId:t.payload,editItem:!0});case"DISABLE_EDIT":return Object(h.a)({},e,{editItem:!1});case"CHANGE_SEARCH_VALUE":return Object(h.a)({},e,{search:t.payload});case"EDIT_VALUE":return Object(h.a)({},e,{loadedData:t.payload});default:return e}},g=a(19),C=a.n(g),N={login:!1,verified:!1,usersCollection:[]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(h.a)({},e,{login:t.payload});case"VERIFY":return Object(h.a)({},e,{verified:t.payload});case"GET_USERS":return Object(h.a)({},e,{usersCollection:t.payload});case"LOG_OUT":return Object(h.a)({},e,{login:t.payload,user:null});default:return e}},x=Object(s.c)({auth:y,cadastro:v,busca:b,toastr:g.reducer}),O=(a(141),function(e){return r.a.createElement(C.a,{timeOut:3e3,newestOnTop:!1,preventDuplicates:!0,position:"top-right",transitionIn:"fadeIn",transitionOut:"fadeOut",progressBar:!0,closeOnToastrClick:!0})}),S=a(313),k=a(315),D=a(312),w=a(314),T=a(4),I=a.n(T),A=a(105),R=function(){return{type:"LOAD_EMP_DATA",payload:I.a.get("/api/showEmpreend").then(function(e){return e.data}).catch(function(e){console.log(e),g.toastr.error("Erro","Sess\xe3o expirada.")})}};function j(){return{type:"LOAD_RT_DATA",payload:I.a.get("/api/showRt").then(function(e){return e.data}).catch(function(e){console.log(e),g.toastr.error("Erro","Sess\xe3o expirada.")})}}function P(){return{type:"LOAD_PROCESS_DATA",payload:I.a.get("/api/showProcess").then(function(e){return e.data}).catch(function(e){console.log(e),g.toastr.error("Erro","Sess\xe3o expirada.")})}}function F(){return{type:"LOAD_FILES_DATA",payload:I.a.get("/api/files").then(function(e){return e.data}).catch(function(e){console.log(e),g.toastr.error("Erro","Sess\xe3o expirada.")})}}function L(){return{type:"LOAD_TECNICOS",payload:A}}var M=function(){var e=["rgb(104, 119, 133)","rgb(84, 104, 102)","rgb(105, 117, 153)","rgb(88, 103, 88)","rgb(117, 116, 101)","rgb(117, 117, 137)"];return{type:"SET_COLOR",payload:e[Math.floor(Math.random()*e.length)]}},_=function(e,t,a){var n=a||"Opera\xe7\xe3o realizada com sucesso";return"sucess"===e?g.toastr.success(n,t):g.toastr.error(n||"Erro",t)},z=function(e){return{type:"LOADING",payload:e}},B=a(3),U=a.n(B),V=a(6),q=function(){var e=new Date;e.setTime(e.getTime()-864e5);var t="expires="+e.toGMTString();document.cookie="_sim-ad=; "+t},H=function(){var e=Object(V.a)(U.a.mark(function e(t){var a;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:return e.next=4,localStorage.clear();case 4:a=t||"",console.log(a),_(" "," ","Sess\xe3o expirada."),setTimeout(function(){window.location.reload()},1900);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),G=a(10),W=a(11),J=a(13),Y=a(12),X=a(14),K=function(e){var t=e.user;return r.a.createElement("div",null,r.a.createElement("div",{className:"card-panel",style:{backgroundImage:"url(".concat("/images/home_bg.jpg",")")}},r.a.createElement("div",{className:"container",style:{paddingBottom:"0.5%"}},r.a.createElement("h1",{className:"display-3"}," ",r.a.createElement("strong",null,r.a.createElement("span",{style:{color:"white"}},"Anu\xeancia Digital")," ")," "),r.a.createElement("h6",{style:{color:"white",fontWeight:"500"}},"Vers\xe3o 1.1.5"),r.a.createElement("br",null),r.a.createElement("h4",{style:{color:"white",fontWeight:"500"}},"Ol\xe1, ",t.name," ",t.surName,"!"))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},e.children)))},Q=a(311),Z=function(e){var t=e.color,a=e.processes;return r.a.createElement("div",{style:{marginTop:"3%"}},r.a.createElement("h5",null,"Voc\xea tem  ",a.length," processos cadastrados."),r.a.createElement("br",null),r.a.createElement("div",{className:"col s12 m4 push-m4 center-align"},r.a.createElement("img",{src:"/images/gerenciarProc3.png",style:{margin:"10px"},alt:""}),r.a.createElement("h5",null,r.a.createElement("b",null,"Acompanhar Processos")),r.a.createElement("p",{style:{textAlign:"justify"}},"Acompanhe o andamento dos processos e veja os documentos, projetos, o hist\xf3rico e as comunica\xe7\xf5es referentes a ele."),r.a.createElement("p",{className:"btn",href:"",role:"button",style:{backgroundColor:t}},r.a.createElement(Q.a,{to:"/showEmpreend",style:{color:"white"}},"Consulta a Processos \xbb"))))},$=[{title:"Cadastrar Processo",text:"Cadastre um novo processo, o interessado e o RT. Caso o interessado e RT estejam cadastrados, informe o nome e o formul\xe1rio ser\xe1 preenchido automaticamente.",link:"/cadastro",img:"/images/cadastro.png",w:"105px",h:"125px"},{title:"Solicitar Diretrizes",text:"Para solicitar diretrizes metropolitanas, selecione o processo e fa\xe7a o upload dos documentos necess\xe1rios em pdf. \xc9 necess\xe1rio que o processo esteja cadastrado.",link:"/solicitaDiretriz",img:"/images/solDir.jpg",w:"120px",h:"125px"},{title:"Solicitar Anu\xeancia",text:"Para solicitar anu\xeancia pr\xe9via, selecione o processo e fa\xe7a o upload dos documentos em meio digital. \xc9 necess\xe1rio que o processo tenha diretrizes metropolitanas validas.",link:"/solicitaDiretriz",img:"/images/solAnuencia2.png  ",w:"120px",h:"125px"},{title:"Acompanhar Processos",text:"Visualize os dados dos processos, interesados e respons\xe1veis t\xe9cnicos. Acompanhe o andamento dos processos e veja seus documentos, projetos e seu hist\xf3rico.",link:"/showEmpreend",img:"/images/process_info3.png",w:"110px",h:"125px"}],ee=function(e){var t=e.color;return r.a.createElement("div",null,$.map(function(e,a){return r.a.createElement("div",{align:"center",className:"col s12 m6 l3",key:a},r.a.createElement("img",{src:e.img,style:{margin:"10px"},alt:"",width:e.w,height:e.h}),r.a.createElement("h5",null,r.a.createElement("b",null,e.title)),r.a.createElement("p",{style:{textAlign:"justify",padding:"0 10%"}},e.text),r.a.createElement("p",{className:"btn",href:"",role:"button",style:{backgroundColor:t}},r.a.createElement(Q.a,{to:e.link,style:{color:"white"}},e.title)," ","\xbb"))}))},te=[{title:"Diretrizes Metropolitanas",text:"Verifique a documenta\xe7\xe3o enviada, agende a vistoria e a CGT e emita a diretriz metropolitana para os processos cadastrados.",link:"/diretrizes",img:"/images/solDir.jpg",w:"105px",h:"125px"},{title:"Analisar Processos",text:"Verifique a documenta\xe7\xe3o, acesse os arquivos e documentos e analise os projetos enviados para emitir pend\xeancias ou anuir o processo.",link:"/anuencia",img:"/images/solAnuencia2.png",w:"120px",h:"125px"},{title:"Acompanhar Processos",text:"Visualize os dados dos processos, interesados e RTs. Acompanhe o andamento dos processos e veja seus documentos, projetos e seu hist\xf3rico.",link:"/showEmpreend",img:"/images/process_info3.png",w:"110px",h:"125px"}],ae=function(e){var t=e.color;return r.a.createElement("div",null,te.map(function(e,a){return r.a.createElement("div",{align:"center",className:"col s12 m6 l4",key:a},r.a.createElement("img",{src:e.img,style:{margin:"10px"},alt:"",width:e.w,height:e.h}),r.a.createElement("h5",null,r.a.createElement("b",null,e.title)),r.a.createElement("p",{style:{textAlign:"justify",padding:"0 10%",maxHeight:"75px"}},e.text),r.a.createElement("p",{className:"btn",href:"",role:"button",style:{backgroundColor:t}},r.a.createElement(Q.a,{to:e.link,style:{color:"white"}},e.title)," ","\xbb"))}))},ne=function(e){function t(){var e,a;Object(G.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(J.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={setColor:""},a}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loadEmpData(),this.props.loadRtData(),this.props.loadProcessData(),setTimeout(function(){var t=document.getElementById("setcolor").style.backgroundColor;e.setState({setColor:t})},450)}},{key:"render",value:function(){var e=Object(h.a)({},localStorage);return r.a.createElement("div",null,r.a.createElement(K,{user:e},("empreend"===e.role||"rt"===e.role)&&r.a.createElement(Z,{color:this.state.setColor,user:e,processes:this.props.data.processCollection}),("prefeitura"===e.role||"admin"===e.role)&&r.a.createElement(ee,{color:this.state.setColor}),"tecnico"===e.role&&r.a.createElement(ae,{color:this.state.setColor})))}}]),t}(n.Component);var re=Object(l.connect)(function(e){return{data:e.cadastro}},function(e){return Object(s.b)({loadEmpData:R,loadRtData:j,loadProcessData:P},e)})(ne),ie=a(9),oe=function(e,t,a,n,r){return'\n    <div style=" \n        position: relative;         \n        font-size: 1rem; \n        font-family: sans-serif;\n        background-color: white;  \n        padding: 3%; \n        border: 1px solid #000;\n        text-align: justify;\n        text-justify: inter-word;\n        border: 1px solid #bbbbbb;\n        border-radius: 1%;\n    ">    \n            <strong>A/C '.concat(e,"</strong>\n            <br />\n            <p>Foi registrada uma movimenta\xe7\xe3o do processo que solicita a emiss\xe3o de Anu\xeancia \n                Pr\xe9via para o ").concat(t," <strong>").concat(a,"</strong>, situado no munic\xedpio de \n                ").concat(n,":</p>\n\n            <p><strong> ").concat(r,' </strong></p>\n\n            <p>Para maiores informa\xe7\xf5es, visite o site\n        <a href="https://sim-anuencia.herokuapp.com/" target="_blank">Anu\xeancia Digital</a>\n            </p>            \n            <p>Atenciosamente,</p><p><em>Equipe da Ag\xeancia de Desenvolvimento da RMBH</em></p>\n        </div>\n    ')},se=function(){var e=Object(V.a)(U.a.mark(function e(t,a,n,r,i,o,s,l){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/api/mail",{to:"".concat(t,", ").concat(a),subject:"Atualiza\xe7\xe3o do processo ".concat(i," - ").concat(s),html:oe(n,r,i,o,s)}).then(function(e){return console.log("ok")});case 2:case"end":return e.stop()}},e)}));return function(t,a,n,r,i,o,s,l){return e.apply(this,arguments)}}(),le=a(32),ce=function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",null,r.a.createElement("button",{className:"btn-flat waves-effect btn-floating right teal",disabled:e.enable,title:"Avan\xe7ar",onClick:e.enableInput},r.a.createElement("i",{className:"material-icons"},"arrow_forward"))))},de=function(e){var t=e.disabled,a=e.icon;return r.a.createElement("div",{className:"input"},r.a.createElement("button",{className:"btn-floating left red darken-3 ".concat(e.size),disabled:t,title:"Voltar",onClick:function(){return e.onClick()}},r.a.createElement("i",{className:"material-icons"},a)))},me=function(e){return"admin"===e.userRole?r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons",style:{fontSize:"24px",color:"red",cursor:"pointer"},title:"Apagar",onClick:function(){return e.delete(e.id)}},"delete_outline")):r.a.createElement("span",null)},ue=function(e){return"admin"===e.userRole?r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons",style:{fontSize:"24px",color:"teal",cursor:"pointer"},title:"Editar",onClick:function(){return e.edit(e.id)}},"edit")):r.a.createElement("span",null)},pe=function(e){return e.display?r.a.createElement("button",{className:"btn-flat waves-effect btn-floating right teal darken-2",title:"Salvar",form:e.form,type:"submit"},r.a.createElement("i",{className:"material-icons"},"save")):null},he=function(e){return r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",title:"Fechar",style:{cursor:"pointer",color:"red"},onClick:e.close},"close"))},Ee=function(e){var t=e.showInfo,a=e.id;return r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons",id:a,onClick:t,style:{fontSize:"24px",color:"#1D90EE",cursor:"pointer"},title:"Informa\xe7\xf5es"},"info"))},ve=function(e){var t=e.title,a=e.subtitle,n=e.color;return r.a.createElement("div",{className:"row col s12"},r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("h5",null,t)),a?r.a.createElement("div",{className:"card-panel valign-wrapper",style:{marginBottom:"10px",maxHeight:"10px",backgroundColor:n,filter:"brightness(200%)",borderRadius:"10px 10px",fontSize:"1rem",fontWeight:500,fontFamily:"Calibri"}},r.a.createElement("span",{style:{color:"black"}},a)):void 0)},fe={nomeEmpreendimento:{divClassName:"input-field col s12 m6 l4",type:"text",name:"nomeEmpreendimento",label:"Nome do Empreendimento:",onBlur:null},area:{divClassName:"input-field col s12 m4 l2",type:"text",name:"area",label:"\xc1rea total da Gleba (m\xb2):",onBlur:null}},be={phoneRt:{divClassName:"input-field col s12 m6 l2",type:"text",name:"phoneRt",label:"Telefone",onBlur:null},emailRt:{divClassName:"input-field col s12 m6 l4",type:"text",name:"emailRt",label:"E-mail",onBlur:null}},ge={cpf:{divClassName:"input-field col s12 m3 l2",type:"text",name:"cpf",label:"CPF / CNPJ"},phone:{divClassName:"input-field col s12 m3 l2",type:"text",name:"phone",label:"Telefone"},email:{divClassName:"input-field col s12 m6 l3",type:"text",name:"email",label:"E-mail"},CEP:{divClassName:"input-field col s12 m3 l1",type:"text",name:"cep",label:"CEP"},numero:{divClassName:"input-field col s12 m3 l1",type:"text",name:"numero",label:"N\xfamero"},complemento:{divClassName:"input-field col s12 m3 l2",type:"text",name:"complemento",label:"Complemento"},rua:{divClassName:"input-field col s12 m6 l3",type:"text",name:"rua",label:"Rua"},bairro:{divClassName:"input-field col s12 m3 l2",type:"text",name:"bairro",label:"Bairro"},cidade:{divClassName:"input-field col s12 m4 l2",type:"text",name:"cidade",label:"Cidade"},uf:{divClassName:"input-field col s12 m3 l1",type:"text",name:"uf",label:"Estado"}},Ce={divClassName:"input-field col s12 m4 l2",name:"modalidade",label:"Modalidade:",options:["","Desmembramento","Loteamento"]},Ne={munEmpreendimento:{divClassName:"input-field col s12 m4 l2",type:"text",name:"munEmpreendimento",label:"Munic\xedpio:",options:["","Baldim","Belo Horizonte","Betim","Brumadinho","Caet\xe9","Capim Branco","Confins","Contagem","Esmeraldas","Florestal","Ibirit\xe9","Igarap\xe9","Itaguara","Itatiaiu\xe7u","Jaboticatubas","Juatuba","Lagoa Santa","M\xe1rio Campos","Mateus Leme","Matozinhos","Nova Lima","Nova Uni\xe3o","Pedro Leopoldo","Raposos","Ribeir\xe3o das Neves","Rio Acima","Rio Manso","Sabar\xe1","Santa Luzia","S\xe3o Joaquim de Bicas","S\xe3o Jos\xe9 da Lapa","Sarzedo","Taquara\xe7u de Minas","Vespasiano"]}},ye=function(e){var t,a,n=Ne.munEmpreendimento.options.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}),i=Ce.options.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}),o=function(t,a){var n=[];for(var i in t)n.push({id:i,settings:t[i],enableInput:a});return n.map(function(t,a){var n=t.settings;return r.a.createElement("div",{key:a,className:n.divClassName},r.a.createElement("input",{type:n.type,id:n.name,className:"active",name:n.name,onChange:e.handleChange,value:e.data[t.id],placeholder:" ",disabled:t.enableInput,onBlur:e.handleBlur}),r.a.createElement("label",{className:"active",htmlFor:n.name},n.label))})},s=Object(h.a)({},localStorage);return r.a.createElement("div",{className:"container",style:{width:"90%"}},r.a.createElement("div",{className:"tab-pane fade show active",id:"empreend"},r.a.createElement(ve,{title:"Cadastro de Processos",subtitle:"Preencha os dados do interessado e RT do processo. Caso o interessado e RT n\xe3o estejam cadastrados, um novo cadastro ser\xe1 gerado automaticamente.",color:e.color}),r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("fieldset",{className:"input-field"},r.a.createElement("legend",{className:"input-field"},r.a.createElement("strong",null," 1- Interessado ")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12 m6 l4"},r.a.createElement("input",{type:"text",list:"empreendList",id:"nome",className:"validate",name:"nome",onChange:e.handleChange,value:e.data.nome,onBlur:e.handleBlurName,disabled:e.data.enableEmp,autoFocus:!0}),r.a.createElement("label",{className:"active",htmlFor:"nome"},"Nome"),(t=e.config.empCollection,a="empreendList",e.data.nome.length>2?r.a.createElement("datalist",{id:a},t.map(function(e,t){return r.a.createElement("option",{key:t},e.nome)})):void 0)),o(ge,e.data.enableEmp))),r.a.createElement(ce,{enableInput:e.enableRtInput,enable:e.data.enableEmp}),r.a.createElement("fieldset",{className:"input-field"},r.a.createElement("legend",{className:"input-field"},r.a.createElement("strong",null," 2 - Respons\xe1vel T\xe9cnico ")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12 m6 l4"},r.a.createElement("input",{type:"text",list:"rtList",className:"validate",name:"nomeRt",id:"rtInput",onChange:e.handleChange,value:e.data.nomeRt,onBlur:e.handleBlurRtName,disabled:e.data.enableRt,autoFocus:e.data.autoFocusRt}),r.a.createElement("label",{className:"active",htmlFor:"nome"},"Nome"),function(e,t,a){return a.length>2?r.a.createElement("datalist",{id:t},e.map(function(e,t){return r.a.createElement("option",{key:t},e.nomeRt)})):void 0}(e.config.rtCollection,"rtList",e.data.nomeRt)),o(be,e.data.enableRt))),r.a.createElement(de,{onClick:e.enableEmpInput,disabled:e.data.enableRt,icon:"arrow_back"}),r.a.createElement(ce,{enableInput:e.enableProcessInput,enable:e.data.enableRt}),r.a.createElement("fieldset",{className:"input-field"},r.a.createElement("legend",{className:"input-field"},r.a.createElement("strong",null," 3 - Dados do Empreendimento ")),r.a.createElement("div",{className:"row"},o(fe,e.data.enableProcess),r.a.createElement("div",{className:"col s12 m4 l2"},r.a.createElement(le.Input,{name:"modalidade",type:"select",label:"Modalidade",defaultValue:e.data.modalidade,onChange:e.handleChange,disabled:e.data.enableProcess},i)),r.a.createElement("div",{className:"col s12 m4 l3"},"admin"===s.role?r.a.createElement(le.Input,{name:"munEmpreendimento",type:"select",label:"Munic\xedpio",defaultValue:e.data.munEmpreendimento,onChange:e.handleChange,disabled:e.data.enableProcess},n):r.a.createElement("div",{className:"input-field col s12 m6 l2"})))),r.a.createElement("div",null,r.a.createElement(de,{onClick:e.backToRt,disabled:e.data.enableProcess,icon:"arrow_back"}),r.a.createElement("input",{type:"submit",className:"btn right",disabled:e.data.enableProcess,style:{margin:"20px 0px"},value:"Cadastrar processo"})),r.a.createElement("br",null),r.a.createElement("br",null))))},xe=function(e){function t(){var e,a;Object(G.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(J.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={empId:"",rtId:"",nome:"",cpf:"",birth:"",phone:"",cep:"",numero:"",complemento:"",email:"",rua:"",bairro:"",cidade:"",uf:"",nomeRt:"",emailRt:"",phoneRt:"",nomeEmpreendimento:"",area:"",modalidade:"",munEmpreendimento:"",enableEmp:"",enableRt:"disabled",enableProcess:"disabled",empMatch:null,rtMatch:null},a}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.cadastro,t=e.empCollection,a=e.rtCollection,n=e.processCollection,r=e.tecCollection;t[0]||this.props.loadEmpData(),n[0]||this.props.loadProcessData(),a[0]||this.props.loadRtData(),r[0]||this.props.loadTecnicos()}},{key:"enableRtInput",value:function(){var e=Object(V.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({enableEmp:"disabled",enableRt:"",enableProcess:"disabled"});case 2:document.getElementById("rtInput").focus();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"enableProcessInput",value:function(){var e=Object(V.a)(U.a.mark(function e(){var t;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("prefeitura"!==(t=Object(h.a)({},localStorage)).role){e.next=4;break}return e.next=4,this.setState({munEmpreendimento:t.municipio});case 4:return e.next=6,this.setState(Object(h.a)({},this.state,{enableRt:"disabled",enableProcess:"",enableEmp:"disabled"}));case 6:document.getElementById("nomeEmpreendimento").focus();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"enableEmpInput",value:function(e){this.setState({enableRt:"disabled",enableProcess:"disabled",enableEmp:""})}},{key:"handleBlur",value:function(e){var t=this;if(e.preventDefault(),"cep"===e.target.name){var a=this.state.cep.replace(".","");I.a.get("https://api.postmon.com.br/v1/cep/".concat(a)).then(function(e){t.setState(Object(h.a)({},t.state,{rua:e.data.logradouro,bairro:e.data.bairro,cidade:e.data.cidade,uf:e.data.estado}))})}}},{key:"handleChange",value:function(e){e.preventDefault();var t=[],a=[];if("nome"===e.target.name){var n,r,i=e.target.value;if(t=this.props.cadastro.empCollection.filter(function(e){return e.nome.toLowerCase().match(i.toLowerCase())}),i&&t[0])this.setState(Object(h.a)({},this.state,(n={},Object(ie.a)(n,e.target.name,e.target.value),Object(ie.a)(n,"empMatch",t),n)));else t="",this.setState(Object(h.a)({},this.state,(r={},Object(ie.a)(r,e.target.name,e.target.value),Object(ie.a)(r,"empMatch",t),r)))}else if("nomeRt"===e.target.name){var o,s,l=e.target.value;if(a=this.props.cadastro.rtCollection.filter(function(e){return e.nomeRt.toLowerCase().match(l.toLowerCase())}),l&&a[0])this.setState(Object(h.a)({},this.state,(o={},Object(ie.a)(o,e.target.name,e.target.value),Object(ie.a)(o,"rtMatch",a),o)));else a="",this.setState(Object(h.a)({},this.state,(s={},Object(ie.a)(s,e.target.name,e.target.value),Object(ie.a)(s,"rtMatch",a),s)))}else this.setState(Object(h.a)({},this.state,Object(ie.a)({},e.target.name,e.target.value)))}},{key:"handleSubmit",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r,i,o,s,l,c,d,m,u,p,E,v,f,b,g,C=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state,n=a.nome,r=a.nomeRt,i=a.nomeEmpreendimento,o=a.modalidade,s=a.munEmpreendimento,l=a.empMatch,c=a.rtMatch,d=a.empId,m=a.rtId,u=Object(h.a)({},localStorage),p=this.props.cadastro.tecCollection,E=p.filter(function(e){return e.municipios.some(function(e){return e===C.state.munEmpreendimento})})[0],v="Loteamento"===o?"Processo cadastrado":"Aguardando documenta\xe7\xe3o",f={nome:this.state.nome,cpf:this.state.cpf,rua:this.state.rua,bairro:this.state.bairro,cep:this.state.cep,cidade:this.state.cidade,phone:this.state.phone,email:this.state.email,numero:this.state.numero,complemento:this.state.complemento,uf:this.state.uf},b={nomeRt:this.state.nomeRt,emailRt:this.state.emailRt,phoneRt:this.state.phoneRt},g={nomeEmpreendimento:this.state.nomeEmpreendimento,modalidade:this.state.modalidade,area:this.state.area.replace(/\./g,""),munEmpreendimento:this.state.munEmpreendimento,status:v,tecnico:"T\xe9cnico n\xe3o alocado",cgt:"CGT n\xe3o agendada",vistoria:"Vistoria n\xe3o agendada",daeDir:"DAE n\xe3o recolhida",daeAnuencia:"DAE n\xe3o recolhida",processHistory:[{label:"Processo cadastrado",createdAt:new Date,user:{nome:u.name+" "+u.surName,email:u.email}}]},"Desmembramento"===this.state.modalidade&&(g.tecnico=E.name+" "+E.surName),n&&r&&i){e.next=14;break}alert("Favor preencher os dados do empreendedor, RT e empreendimento."),e.next=53;break;case 14:if(o&&(s||"admin"!==u.role)){e.next=18;break}alert("Favor preencher a modalidade do empreendimento."),e.next=53;break;case 18:if(!(n&&r&&i&&o&&s)){e.next=53;break}if(this.props.loading(!0),e.prev=20,!l||!c){e.next=28;break}return g.empId=d,g.rtId=m,e.next=26,I.a.post("/api/cadastro_process",g);case 26:e.next=43;break;case 28:if(!l||c){e.next=34;break}return g.empId=d,e.next=32,I.a.post("/api/cadastro_rt",b).then(function(e){g.rtId=e.data.RT_id,I.a.post("/api/cadastro_process",g)});case 32:e.next=43;break;case 34:if(l||!c){e.next=40;break}return g.rtId=m,e.next=38,I.a.post("/api/cadastro_emp",f).then(function(e){g.empId=e.data.Cadastro_id,I.a.post("/api/cadastro_process",g)});case 38:e.next=43;break;case 40:if(l||c){e.next=43;break}return e.next=43,I.a.post("/api/cadastro_emp",f).then(function(e){g.empId=e.data.Cadastro_id,I.a.post("/api/cadastro_rt",b).then(function(e){g.rtId=e.data.RT_id,I.a.post("/api/cadastro_process",g)})});case 43:return this.props.loading(!1),e.next=46,se(f.email,b.emailRt,f.nome,g.modalidade,g.nomeEmpreendimento,g.munEmpreendimento,"Processo cadastrado.");case 46:_("sucess",g.nomeEmpreendimento,"Processo Cadastrado."),setTimeout(function(){window.location.reload()},1600),e.next=53;break;case 50:e.prev=50,e.t0=e.catch(20),H(e.t0);case 53:case"end":return e.stop()}},e,this,[[20,50]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleBlurName",value:function(){this.state.empMatch&&this.state.empMatch[0]&&this.state.empMatch[0].nome===this.state.nome?(this.setState(Object(h.a)({},this.state,{empId:this.state.empMatch[0]._id,phone:this.state.empMatch[0].phone,cpf:this.state.empMatch[0].cpf,cep:this.state.empMatch[0].cep,numero:this.state.empMatch[0].numero,complemento:this.state.empMatch[0].complemento,email:this.state.empMatch[0].email,rua:this.state.empMatch[0].rua,bairro:this.state.empMatch[0].bairro,cidade:this.state.empMatch[0].cidade,uf:this.state.empMatch[0].uf})),this.enableRtInput()):this.setState(Object(h.a)({},this.state,{empId:"",phone:"",cpf:"",birth:"",cep:"",numero:"",complemento:"",email:"",rua:"",bairro:"",cidade:"",uf:""}))}},{key:"handleBlurRtName",value:function(){var e=Object(V.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.rtMatch||!this.state.rtMatch[0]||this.state.rtMatch[0].nomeRt!==this.state.nomeRt){e.next=6;break}return e.next=3,this.setState({rtId:this.state.rtMatch[0]._id,phoneRt:this.state.rtMatch[0].phoneRt,emailRt:this.state.rtMatch[0].emailRt});case 3:""!==this.state.enableEmp&&this.enableProcessInput(),e.next=7;break;case 6:this.setState({rtId:"",phoneRt:"",emailRt:""});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"backToRt",value:function(){this.setState({enableEmp:"disabled",enableRt:"",enableProcess:"disabled"})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ye,{data:this.state,config:this.props.cadastro,handleChange:this.handleChange.bind(this),handleBlurName:this.handleBlurName.bind(this),handleBlurRtName:this.handleBlurRtName.bind(this),handleSubmit:this.handleSubmit.bind(this),handleBlur:this.handleBlur.bind(this),enableRtInput:this.enableRtInput.bind(this),enableProcessInput:this.enableProcessInput.bind(this),enableEmpInput:this.enableEmpInput.bind(this),backToRt:this.backToRt.bind(this),color:this.props.cadastro.setColor}))}}]),t}(r.a.Component);var Oe=Object(l.connect)(function(e){return{cadastro:e.cadastro}},function(e){return Object(s.b)({loadEmpData:R,loadRtData:j,loadProcessData:P,loadTecnicos:L,loading:z,reduxToastr:_},e)})(xe);function Se(){return{type:"DISABLE_EDIT"}}function ke(e){return{type:"FIND_EMP_ID",payload:e}}function De(e){return{type:"CHANGE_SEARCH_VALUE",payload:e}}var we=[{name:"processHistory",label:"Hist\xf3rico do Processo",div:"col s1"},{name:"_id",label:"ID",div:"col s3"},{name:"nProcess",label:"Num. do processo",div:"col s1"},{name:"nomeEmpreendimento",label:"Nome do empreendimento",div:"col s2"},{name:"modalidade",label:"Modalidade",div:"col s1"},{name:"area",label:"\xc1rea (m\xb2)",div:"col s1"},{name:"munEmpreendimento",label:"Munic\xedpio",div:"col s1"},{name:"status",label:"Status do processo",div:"col s1"},{name:"tecnico",label:"T\xe9cnico da Ag\xeancia",div:"col s1"},{name:"cgt",label:"Data da CGT",div:"col s1"},{name:"vistoria",label:"Data da Vistoria",div:"col s1"},{name:"daeDir",label:"DAE - Diretrizes",div:"col s1"},{name:"daeAnuencia",label:"DAE - Anu\xeancia",div:"col s1"},{name:"empId",label:"EmpId",div:"col s1"},{name:"rtId",label:"rtId",div:"col s1"},{name:"createdAt",label:"Data de Cria\xe7\xe3o",div:"col s1"},{name:"updatedAt",label:"Atualizado em",div:"col s1"},{name:"__v",label:"version",div:"col s1"}],Te=[{label:"Diretrizes Municipais",nameInput:"dirMunFile"},{label:"Delimita\xe7\xe3o da \xe1rea do empreendimento (em formato kml)",nameInput:"kml"},{label:"Levantamento Planialtim\xe9trico",nameInput:"levPlanFile"},{label:"Comprovante de pagamento da DAE",nameInput:"dirDaeFile"}],Ie=[{name:"_id",label:"ID",div:"col s1"},{name:"nome",label:"Nome",div:"col s2"},{name:"cpf",label:"CPF",div:"col s2"},{name:"rua",label:"Rua",div:"col s3"},{name:"bairro",label:"Bairro",div:"col s1"},{name:"cep",label:"CEP",div:"col s1"},{name:"cidade",label:"Cidade",div:"col s2"},{name:"phone",label:"Telefone",div:"col s1"},{name:"email",label:"E-mail",div:"col s2"},{name:"numero",label:"N\xfamero",div:"col s1"},{name:"complemento",label:"Complemento",div:"col s1"}],Ae=[{name:"_id",label:"ID",div:"col s1"},{name:"nomeRt",label:"Nome",div:"col s1"},{name:"emailRt",label:"E-mail",div:"col s2"},{name:"phoneRt",label:"Telefone",div:"col s2"}],Re=[{nameInput:"regImovel",label:"Registro do Im\xf3vel",tooltip:"Certid\xe3o de Registro do Im\xf3vel com negativa de \xf4nus, emitida em at\xe9 30 dias antes da entrada do processo na Prefeitura Municipal."},{nameInput:"CNDOnus",label:"Certid\xe3o Negativa de \xf4nus reais",tooltip:"Certid\xe3o Negativa de \xf4nus reais."},{nameInput:"CNDMun",label:"Certid\xe3o Negativa de tributos municipais",tooltip:"Certid\xe3o Negativa de tributos municipais."},{nameInput:"empRG",label:"Fotoc\xf3pia da Identidade do propriet\xe1rio",tooltip:"Fotoc\xf3pia da Identidade do propriet\xe1rio; no caso de pessoa jur\xeddica, fotoc\xf3pia do contrato social e de suas altera\xe7\xf5es."},{nameInput:"art",label:"ART com comprovante de pagamento",tooltip:"ART referente ao projeto com comprovante de pagamento"},{nameInput:"decConform",label:"Declara\xe7\xe3o de conformidade",tooltip:"Documento emitido pela Prefeitura Municipal declarando a conformidade do parcelamento com a legisla\xe7\xe3o municipal"},{nameInput:"daeAnuencia",label:"Comprovante de pagamento da DAE",tooltip:"Comprovante de pagamento da taxa de expediente para emiss\xe3o de anu\xeancia pr\xe9via por meio de Documento de Arrecada\xe7\xe3o Estadual"},{nameInput:"memDescritivo",label:"Memorial descritivo",tooltip:"Descri\xe7\xe3o sucinta do loteamento com suas caracter\xedsticas, \xe1reas p\xfablicas, equipamentos etc. "},{nameInput:"memDescTp",label:"Memorial Descritivo do Projeto de Terraplenagem",tooltip:"O memorial dever\xe1 conter a determina\xe7\xe3o da inclina\xe7\xe3o dos taludes de corte e aterro e a caracteriza\xe7\xe3o do tipo de solo."},{nameInput:"cemig",label:"Certid\xe3o da Cemig",tooltip:"Cemig"},{nameInput:"dtbCopasa",label:"Diretriz T\xe9cnica B\xe1sica (Copasa)",tooltip:"O memorial dever\xe1 conter a determina\xe7\xe3o da inclina\xe7\xe3o dos taludes de corte e aterro e a caracteriza\xe7\xe3o do tipo de solo."},{nameInput:"licAmbental",label:"AAF ou Licen\xe7a Ambiental de Instala\xe7\xe3o",tooltip:"Certid\xe3o de Dispensa (classe 1) Autoriza\xe7\xe3o Ambiental de Funcionamento (classe 3) ou LI (classe 5). "}],je=[{nameInput:"levPlan",label:"Levantamento Planialtim\xe9trico",tooltip:"mesma escala do Projeto Urban\xedstico, em sistema de coordenadas UTM e com delimita\xe7\xe3o e confrontantes compat\xedveis com a descri\xe7\xe3o da Certid\xe3o de Registro do im\xf3vel"},{nameInput:"projUrb",label:"Projeto Urban\xedstico",tooltip:"Com coordenadas UTM, curvas de n\xedvel e escala de 1:25000"},{nameInput:"mapaIso",label:"Projeto Urban\xedstico com mapa de Isodeclividade",tooltip:"Mapa de isodeclividade com intervalos 0 a 30%, 30 a 47% e acima de 47%"},{nameInput:"projTer",label:"Projeto de Terraplenagem",tooltip:"Projeto na mesma escala do Projeto Urban\xedstico e em sistema de coordenadas UTM"},{nameInput:"projDren",label:"Projeto de Drenagem",tooltip:"Projeto na mesma escala do Projeto Urban\xedstico e em sistema de coordenadas UTM"}],Pe=[{nameInput:"regImovel",label:"Registro do Im\xf3vel",tooltip:"Certid\xe3o de Registro do Im\xf3vel com negativa de \xf4nus, emitida em at\xe9 30 dias antes da entrada do processo na Prefeitura Municipal."},{nameInput:"CNDMun",label:"Certid\xe3o Negativa de tributos municipais",tooltip:"Certid\xe3o Negativa de tributos municipais."},{nameInput:"empRG",label:"Fotoc\xf3pia da Identidade do propriet\xe1rio",tooltip:"Fotoc\xf3pia da Identidade do propriet\xe1rio; no caso de pessoa jur\xeddica, fotoc\xf3pia do contrato social e de suas altera\xe7\xf5es."},{nameInput:"art",label:"ART com comprovante de pagamento",tooltip:"ART referente ao projeto com comprovante de pagamento"},{nameInput:"decConform",label:"Declara\xe7\xe3o de conformidade",tooltip:"Documento emitido pela Prefeitura Municipal declarando a conformidade do parcelamento com a legisla\xe7\xe3o municipal"},{nameInput:"daeAnuencia",label:"Comprovante de pagamento da DAE",tooltip:"Comprovante de pagamento da taxa de expediente para emiss\xe3o de anu\xeancia pr\xe9via por meio de Documento de Arrecada\xe7\xe3o Estadual"},{nameInput:"memDescritivo",label:"Memorial descritivo",tooltip:"Descri\xe7\xe3o sucinta do loteamento com suas caracter\xedsticas, \xe1reas p\xfablicas, equipamentos etc. "}],Fe=[{nameInput:"projDesmemb",label:"Projeto de Desmembramento"}],Le=function(){var e=[];return Te.forEach(function(t){e.push(t)}),Re.forEach(function(t){e.push(t)}),je.forEach(function(t){e.push(t)}),e.push({nameInput:"diretrizFile",label:"Diretrizes Metropolitanas"},{nameInput:"notaTecnica",label:"Nota T\xe9cnica"},{nameInput:"anuenciaFile",label:"Certid\xe3o de Anu\xeancia Metropolitana"},{nameInput:"projDesmemb",label:"Projeto de Desmembramento"}),e},Me=function(e){return Le().filter(function(t){return t.nameInput.match(e)})[0].label},_e=function(e,t){var a;if((a=Ie.filter(function(t){return t.name===e}).concat(Ae.filter(function(t){return t.name===e})).concat(we.filter(function(t){return t.name===e})))&&a.length>0)switch(t){case"div":return a[0].div;case"label":return a[0].label;default:return null}},ze=function(e){var t,a=e.empId,n=e.rtId,i=e.showEmp,o=e.showRt,s=e.close,l=e.empCollection,c=e.rtCollection,d="";return i&&l&&(d=l.filter(function(e){return e._id.match(a)}),t=Object.entries(d[0]).splice(2,9)),o&&c&&(d=c.filter(function(e){return e._id.match(n)}),t=Object.entries(d[0]).splice(2,2)),""!==d&&(i||o)?r.a.createElement("div",{className:"card z-depth-5",style:{position:"fixed",top:"30%",right:"33%",left:"33%",padding:"5px 0px 7px 20px",borderRadius:"15px",border:"1px solid #aaa"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"center"},r.a.createElement("h5",null,d[0].nome)),r.a.createElement("div",{className:"center"},r.a.createElement("h5",null,d[0].nomeRt))),r.a.createElement("div",{className:"row"},t.map(function(e,t){return r.a.createElement("div",{className:"col s12 m6",key:t},r.a.createElement("strong",null," ",_e(e[0],"label"),": "),e[1]," ")})),r.a.createElement("div",{style:{position:"absolute",top:"0.4%",right:"0.4%"}},r.a.createElement(he,{close:s}))):null},Be=Ne.munEmpreendimento.options.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}),Ue=Ce.options.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}),Ve=function(e){return e.data.edit&&e.data.item?r.a.createElement("form",{onSubmit:e.submit,id:"".concat(e.data.select)},function(){if(e.data.edit&&e.data.item){var t=function(e,t){return e.splice(e.length-t,e.length),e},a=e.data.item,n=[];for(var i in a)n.push({key:i,value:a[i]});var o=n;return"emp"===e.data.select&&n.length>14&&(o=t(n,3)),"rt"===e.data.select&&n.length>5&&(o=t(n,3)),"rt"===e.data.select&&5===n.length&&(o=t(n,1)),"process"===e.data.select&&(o=t(n.slice(2),9)),o.map(function(t,a){return"_id"===t.key?void 0:"modalidade"===t.key?r.a.createElement("div",{className:"col s2",key:a+100},r.a.createElement(le.Input,{name:"modalidade",type:"select",label:"Modalidade",defaultValue:e.data.item[t.key],onChange:e.change},Ue)):"munEmpreendimento"===t.key?r.a.createElement("div",{className:"col s4",key:a+200},r.a.createElement(le.Input,{name:"munEmpreendimento",type:"select",label:"Munic\xedpio",defaultValue:e.data.item[t.key],onChange:e.change},Be)):r.a.createElement("div",{key:a,className:"input-field col s3"},r.a.createElement("label",{className:"active"},t.key.replace(/\w/,function(e){return e.toUpperCase()})),r.a.createElement("input",{type:"text",className:"active",name:t.key,value:e.data.item[t.key],onChange:e.change}))})}return null}()):null},qe=(a(82),function(e){var t=e.edit,a=localStorage.getItem("role"),n="Visualize e busque por dados dos processos, interesados e RTs utilizando a barra de busca abaixo";return"rt"===a&&(n="Visualize e busque por dados dos processos utilizando a barra de busca abaixo"),r.a.createElement("div",null,r.a.createElement(ve,{title:"Acompanhar Processos",subtitle:n,color:e.color}),!1===t?r.a.createElement("div",null,"rt"!==a&&r.a.createElement("div",{className:"col s3"},r.a.createElement("label",null,"Selecione o m\xe9todo de Busca"),r.a.createElement("br",null),r.a.createElement("select",{className:"browser-default",value:e.select,onChange:e.onSelect},r.a.createElement("option",{value:"",key:"1",label:"Selecionar"},"Selecionar "),r.a.createElement("option",{value:"emp",key:"2",label:"Empreendedor"},"Empreendedor "),r.a.createElement("option",{value:"rt",key:"3",label:"Respons\xe1vel T\xe9cnico"},"Respons\xe1vel T\xe9cnico "),r.a.createElement("option",{value:"process",key:"4",label:"Processo"},"Processo "))),r.a.createElement("div",{className:"col s9"},r.a.createElement("form",{className:"input-field"},r.a.createElement("input",{className:"form-control",value:e.search,onChange:e.change,type:"search",placeholder:"digite pelo menos 3 d\xedgitos para procurar","aria-label":"Search"})))):r.a.createElement("h5",{style:{marginBottom:"40px"}},"Editar dados"))}),He=function(e){var t,a=e.redux,n=e.emps,i=e.rts,o=e.process,s=e.empFields,l=e.rtFields,c=e.showRt,d=e.edit,m=e.deleteOne,u=e.data,p=e.fields,h=e.divConfig,E=e.color,v=e.empDetails,f=e.rtDetails,b=e.showInfo,g=e.clearLog,C=localStorage.getItem("role"),N=[],y=[];n&&n[0]&&!1===u.edit?(N=n,t=s,y=Ie,h=["col s3","col s2","col s2","col s1","col s1","col s2"]):i&&i[0]&&!1===u.edit?(N=i,t=l,y=Ae,h=["col s4","col s3","col s4"]):o&&o[0]&&!1===u.edit&&(N=o,t=p,y=we);var x=[];if(y.length>0&&t.forEach(function(e){x.push(y.filter(function(t){return t.name===e})[0])}),N&&N[0])return r.a.createElement("div",{className:"z-depth-3",style:{padding:"0px 11px",borderRadius:"10px"}},r.a.createElement("div",{className:"row tableHeader",style:{backgroundColor:E,filter:"brightness(190%)",padding:"5px 0px"}},x.map(function(e,t){return"_id"!==e.name?r.a.createElement("div",{className:h[t],key:t}," ",e.label," "):void 0}),"process"===u.select?r.a.createElement("div",null,r.a.createElement("div",{className:"col s2"},"Interessado "),c?r.a.createElement("div",{className:"col s1"},"RT "):void 0):void 0,("admin"===C||"process"===u.select)&&r.a.createElement("div",{className:"col s1"},"Informa\xe7\xf5es")),N.map(function(e,n){var i,o,s=[],l=a.empCollection.filter(function(t){return t._id.match(e.empId)});for(var p in l)i={key:p,values:l[p]};for(var E in o=a.rtCollection.filter(function(t){return t._id.match(e.rtId)}))o={key:E,values:o[E]};for(var N in e)s.push({key:N,values:e[N]});var y=[];return t&&t.length>0&&t.map(function(e){return y.push(s.filter(function(t){return t.key===e})[0])}),r.a.createElement("div",{className:"row",key:n,style:{borderBottom:"1px dotted #bbb",paddingBottom:"1%"}},y.map(function(e,t){return"_id"!==e.key?!isNaN(Date.parse(e.values))&&String(e.values).length>15?r.a.createElement("div",{key:t,className:"col s1"},new Date(e.values).getDate(),"/",new Date(e.values).getMonth()+1,"/",new Date(e.values).getFullYear()):r.a.createElement("div",{key:t,className:h[t],style:{wordBreak:"break-word"}},e.values):void 0}),"process"===u.select&&i&&i.values?r.a.createElement("div",{id:i.values._id,className:"col s2",style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:v},i.values.nome):r.a.createElement("div",{className:"col s2"},"  "),c&&"process"===u.select&&o&&o.values?r.a.createElement("div",{id:o.values._id,className:"col s1",style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:f},o.values.nomeRt):r.a.createElement("div",{className:"col s1"}," "),"process"===u.select?r.a.createElement("div",{className:"col s2",style:{display:"flex",justifyContent:"space-between",maxWidth:"95px",margin:"0 auto",padding:"0px 5px",height:"100%",verticalAlign:"middle",paddingLeft:"".concat("admin"!==C&&"3%")}},r.a.createElement(Ee,{showInfo:b,clearLog:g,id:e._id}),r.a.createElement(ue,{edit:d,id:e._id,userRole:C}),r.a.createElement(me,{delete:m,id:e._id,userRole:C})):r.a.createElement("div",{className:"col s2 right",style:{display:"flex",justifyContent:"space-around",maxWidth:"95px",margin:"0 auto",padding:"0px 5px",height:"100%",verticalAlign:"middle"}},r.a.createElement(ue,{edit:d,id:e._id,userRole:C}),r.a.createElement(me,{delete:m,id:e._id,userRole:C})))}));var O="processo";return"emp"===u.select&&(O="empreendedor"),"rt"===u.select&&(O="respons\xe1vel t\xe9cnico"),r.a.createElement("div",{style:{textAlign:"center",padding:"4% 0"}},r.a.createElement("strong",null,"Nenhum ",O," encontrado. Verifique se que seu processo foi cadastrado pela prefeitura."))},Ge=function(e){return/\d/.test(e)?new Date(e).getDate()+"/"+(new Date(e).getMonth()+1)+"/"+new Date(e).getFullYear()+", "+new Date(e).getHours()+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+"h":e},We=function(e){return e>1024&&e<1048576?Math.round(e/1024)+" KB":e>=1048576&&e<1073741824?(e/1024/1024).toFixed(2)+" MB":e+" bytes"},Je=function(e,t){if(!0===e)return{position:"fixed",top:t[0],right:"15%",left:"15%",height:t[1],borderRadius:"15px",backgroundColor:"#fbfbfb",border:"2px solid #aaa",marginBottom:"25px",marginTop:"25px",overflowY:"auto",overflowX:"hidden",zIndex:1,padding:"2rem"}},Ye=function(e,t){I()({url:"/api/download/".concat(e.target.id),method:"GET",responseType:"blob"}).then(function(e){var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=a,n.setAttribute("download",t),document.body.appendChild(n),n.click()}).catch(function(e){console.log(e),H(e)})},Xe=function(e){function t(){return Object(G.a)(this,t),Object(J.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearLog()}},{key:"render",value:function(){var e=this.props,t=e.process,a=e.index,n=e.clearLog,i=e.soloComponent,o=e.hideLog,s=t.processHistory[a];return r.a.createElement("div",{style:Je(i,["8%","85%"])},!0===i?r.a.createElement("div",{className:"row",style:{textAlign:"center"}},r.a.createElement("div",{style:{position:"absolute",top:"0.5%",right:"0.5%"}},r.a.createElement(he,{close:o}))):null,"Pend\xeancias para emiss\xe3o de diretrizes"===s.label||s.label.match("An\xe1lise")?r.a.createElement("div",null,r.a.createElement("h5",null,s.label)," ",r.a.createElement("hr",null)," ",r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("h5",null," ",r.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}})," Arquivos > ",t.nomeEmpreendimento," > ",s.label)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("div",{className:"col s1"},r.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png"})),r.a.createElement("div",{className:"col s11"},r.a.createElement("h6",{style:{fontSize:"1.2em",fontWeight:500}},"Arquivo"))),r.a.createElement("div",{className:"col s3"},r.a.createElement("h6",{style:{fontSize:"1.2em",fontWeight:500}},"Data de Upload")),r.a.createElement("div",{className:"col s3"},r.a.createElement("h6",{style:{fontSize:"1.2em",fontWeight:500}},"Tamanho")))),"Pend\xeancias para emiss\xe3o de diretrizes"===s.label?r.a.createElement("div",null,s.pendencias):s.label.match("An\xe1lise")?r.a.createElement("div",{dangerouslySetInnerHTML:{__html:s.pendencias}}):s.files.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("div",{className:"col s1"},r.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),r.a.createElement("div",{className:"col s11"},r.a.createElement("span",{id:e.id,style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(t){return Ye(t,e.originalName)}},(a=e.fieldName,Le().filter(function(e){return e.nameInput.match(a)})[0].label)))),r.a.createElement("div",{className:"col s3"},Ge(e.uploadDate)),r.a.createElement("div",{className:"col s3"},We(e.fileSize))));var a}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s1 left",style:{marginTop:"1%"}},r.a.createElement("strong",null,r.a.createElement("i",{className:"material-icons",style:{marginTop:"10%",color:"teal",cursor:"pointer",border:"1px solid #bbb",borderRadius:"55%"},onClick:n}," arrow_back")))))}}]),t}(n.Component),Ke=function(e){var t=e.logDetails,a=e.index,n=e.process,i=e.showLog,o=e.clearLog,s=e.soloComponent,l=e.hideLog;return!1===t?r.a.createElement("div",{style:Je(s,["15%","70%"])},!0===s?r.a.createElement("div",{className:"row",style:{textAlign:"center"}},r.a.createElement("div",{style:{position:"absolute",top:"0.5%",right:"0.5%"}},r.a.createElement(he,{close:l})),r.a.createElement("h5",null,"Hist\xf3rico do Processo - ",n.nomeEmpreendimento)):null,r.a.createElement("div",{className:"row",style:{padding:"2% 0% 0% 3%",fontSize:"18px"}},r.a.createElement("div",{className:"col s12 m4"}," ",r.a.createElement("strong",null,"Status do processo")," "),r.a.createElement("div",{className:"col s12 m4 center"}," ",r.a.createElement("strong",null,"Usu\xe1rio")," "),r.a.createElement("div",{className:"col s12 m4 ",style:{paddingLeft:"9%",fontsize:"10px"}}," ",r.a.createElement("strong",null,"Data")," ")),n.processHistory.map(function(e,t){return r.a.createElement("div",{className:"row",key:t,style:{paddingLeft:"3%"}},"Processo cadastrado"===e.label?r.a.createElement("div",null,r.a.createElement("div",{className:"col s12 m4"},e.label),r.a.createElement("div",{className:"col s12 m4 center"},e.user.nome||" "),r.a.createElement("div",{className:"col s12 m3 center"}," ",Ge(e.createdAt))):r.a.createElement("div",null,r.a.createElement("div",{className:"col s12 m4"},r.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer",color:"blue"},id:t,onClick:i},e.label)),r.a.createElement("div",{className:"col s12 m4 center"},e.user.nome||" "),r.a.createElement("div",{className:"col s12 m3 center"}," ",Ge(e.createdAt))))})):r.a.createElement(Xe,{process:n,index:a,clearLog:o,soloComponent:s,hideLog:l})},Qe=function(e){function t(){var e;return Object(G.a)(this,t),(e=Object(J.a)(this,Object(Y.a)(t).call(this))).state={search:"",select:"process",edit:!1,selectId:"",itemId:"",item:{},nome:"",setColor:"",showEmpDetails:!1,showRtDetails:!1,empId:"",rtId:"",cgt:"",showInfo:"",process:"",logIndex:"",logDetails:!1},e.handleSelect=function(t){e.setState(Object(h.a)({},e.state,{select:t.target.value}))},e.enableEdit=function(t){var a=[],n={};"emp"===e.state.select&&(a=e.props.cadastro.empCollection.filter(function(e){return e._id.match(t)}),n=Object.assign({},a)),"rt"===e.state.select&&(a=e.props.cadastro.rtCollection.filter(function(e){return e._id.match(t)}),n=Object.assign({},a)),"process"===e.state.select&&(a=e.props.cadastro.processCollection.filter(function(e){return e._id.match(t)}),n=Object.assign({},a)),e.setState(Object(h.a)({},e.state,{item:n[0],edit:!0}))},e.disableEdit=function(){e.props.disableEdit(),e.setState(Object(h.a)({},e.state,{edit:!1}))},e.editValue=function(t){if(e.state.item){var a=Object.assign({},e.state.item,Object(ie.a)({},t.target.name,t.target.value));e.setState(Object(h.a)({},e.state,{item:a}))}},e.escFunction=function(t){27===t.keyCode&&(e.state.showEmpDetails||e.state.showRtDetails)&&e.closeDetails(),e.state.showInfo&&e.hideLog()},e}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.cadastro,t=e.empCollection,a=e.rtCollection,n=e.processCollection;"rt"!==localStorage.getItem("role")&&(a[0]||this.props.loadRtData()),t[0]||this.props.loadEmpData(),n[0]||this.props.loadProcessData(),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"deleteHandler",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.select,!window.confirm("Excluir registro?")){e.next=7;break}return e.next=4,I.a.delete("/api/delete/item?id=".concat(t,"&el=").concat(a)).catch(function(e){return console.log(e)});case 4:"emp"===a&&this.props.loadEmpData(),"rt"===a&&this.props.loadRtData(),"process"===a&&this.props.loadProcessData();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSearchBar",value:function(){var e=Object(V.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({search:t.target.value});case 2:this.props.changeHandler(this.state.search);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveEdit",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.item||"process"===this.state.select){e.next=8;break}return a=this.state.select,e.next=4,I.a.put("/api/edit",{el:a,item:this.state.item}).then(this.setState({edit:!1})).catch(function(e){return alert(e)});case 4:"emp"===a&&this.props.loadEmpData(),"rt"===a&&this.props.loadRtData(),e.next=14;break;case 8:if(!this.state.item){e.next=14;break}return delete(n=Object.assign({},this.state.item)).processHistory,e.next=13,I.a.put("/api/editProcess",{item:n}).then(this.setState({edit:!1})).catch(function(e){return alert(e)});case 13:this.props.loadProcessData();case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"empDetails",value:function(e){this.setState({showEmpDetails:!0,showRtDetails:!1,empId:e.target.id})}},{key:"rtDetails",value:function(e){this.setState({showEmpDetails:!1,showRtDetails:!0,rtId:e.target.id})}},{key:"closeDetails",value:function(){this.setState({showEmpDetails:!1,showRtDetails:!1,empId:"",rtId:""})}},{key:"showInfo",value:function(e){var t=this.props.cadastro.processCollection.filter(function(t){return t._id.match(e.target.id)});this.setState({showInfo:!0,process:t[0]})}},{key:"showLog",value:function(e){this.setState({logIndex:e.target.id,logDetails:!0})}},{key:"hideLog",value:function(){this.setState({logIndex:"",showInfo:!1})}},{key:"clearLog",value:function(){this.setState({logDetails:!1,logIndex:""})}},{key:"render",value:function(){var e=this,t=[],a=[],n=[],i=this.state,o=i.search,s=i.select,l=o.trim().toLowerCase(),c=this.props.cadastro,d=c.empCollection,m=c.rtCollection,u=c.processCollection;return o&&o.length>2&&"emp"===s&&d?t=d.filter(function(e){return e.nome.toLowerCase().match(l)}).slice(0,20):(!o||o.length<=2)&&"emp"===s&&(t=d.slice(0,30)),o&&o.length>2&&"rt"===s&&m?a=m.filter(function(e){return e.nomeRt.toLowerCase().match(l)}).slice(0,20):(!o||o.length<=2)&&"rt"===s&&(a=m.slice(0,30)),o&&o.length>2&&"process"===s&&u?n=u.filter(function(e){return e.nomeEmpreendimento.toLowerCase().match(l)}).slice(0,20):(!o||o.length<=2)&&"process"===s&&(n=u.slice(0,30)).sort(function(e,t){var a=new Date(e.updatedAt),n=new Date(t.updatedAt);return a&&n?n.getTime()>a.getTime()?1:a.getTime()>n.getTime()?-1:0:null}),r.a.createElement("div",{className:"container",style:{width:"90%"}},r.a.createElement(qe,{search:o,select:s,edit:this.state.edit,redux:this.props.cadastro,onSelect:this.handleSelect,change:function(t){return e.handleSearchBar(t)},color:this.props.cadastro.setColor}),this.state.showInfo?r.a.createElement("div",null,r.a.createElement(Ke,{process:this.state.process,logDetails:this.state.logDetails,index:this.state.logIndex,showLog:this.showLog.bind(this),hideLog:this.hideLog.bind(this),clearLog:this.clearLog.bind(this),soloComponent:!0})):null,r.a.createElement("div",null,r.a.createElement(He,{data:this.state,redux:this.props.cadastro,emps:t,rts:a,process:n,empFields:["nome","cpf","rua","cidade","phone","email"],rtFields:["nomeRt","emailRt","phoneRt"],showRt:!1,fields:["nProcess","nomeEmpreendimento","modalidade","area","munEmpreendimento","status","tecnico","updatedAt"],divConfig:["col s1","col s2","col s1","col s1","col s1","col s1","col s1","col s1"],edit:this.enableEdit.bind(this),deleteOne:this.deleteHandler.bind(this),color:this.props.cadastro.setColor,empDetails:this.empDetails.bind(this),rtDetails:this.rtDetails.bind(this),showInfo:this.showInfo.bind(this),clearLog:this.clearLog.bind(this)}),r.a.createElement(Ve,{redux:this.props.cadastro,data:this.state,disableEdit:this.disableEdit.bind(this),change:function(t){return e.editValue(t)},submit:function(t){return e.saveEdit(t)}})),r.a.createElement("div",null,this.state.edit?r.a.createElement(de,{onClick:this.disableEdit,icon:"arrow_back"}):null,r.a.createElement(pe,{form:"".concat(s),display:this.state.edit}),r.a.createElement(ze,{empId:this.state.empId,rtId:this.state.rtId,showEmp:this.state.showEmpDetails,showRt:this.state.showRtDetails,close:this.closeDetails.bind(this),empCollection:this.props.cadastro.empCollection,rtCollection:this.props.cadastro.rtCollection})))}}]),t}(n.Component);var Ze=Object(l.connect)(function(e){return{cadastro:e.cadastro}},function(e){return Object(s.b)({loadEmpData:R,loadRtData:j,loadProcessData:P,handleEdit:ke,disableEdit:Se,changeHandler:De,reduxToastr:_},e)})(Qe),$e=function(e){var t=e.div||"col s1";return e.cond?r.a.createElement("div",{className:t},e.value||e.children):null},et=function(e){var t=e.search,a=e.collection,n=e.rtCollection,i=e.processCollection,o=e.onSelect,s=e.checked,l=e.fields,c=e.color,d=e.renderEmp,m=e.renderRt,u=e.empDetails,p=e.rtDetails,h=e.showFiles,E=e.ocultarArquivos,v=[];if(i&&i[0]){for(var f in i)i[f].solDirFiles&&i[f].solDirFiles.length>0&&v.push(i[f].solDirFiles);v[0]}var b=[];return l.forEach(function(e){b.push(we.filter(function(t){return t.name===e})[0])}),r.a.createElement("div",null,t.length>0?r.a.createElement("div",{className:"row tableHeader",style:{backgroundColor:c}},b.map(function(e,t){return r.a.createElement($e,{cond:"_id"!==e.name,value:e.label,div:e.div,key:t})}),r.a.createElement($e,{cond:d,value:"Interessado",div:"col s2"}),r.a.createElement($e,{cond:m,value:"RT"}),r.a.createElement($e,{cond:!E,value:"Arquivos"}),r.a.createElement("div",{className:"col s1"},"Selecionar")):null,t.length>0?t.map(function(e,t){var i=[],c=a.filter(function(t){return t._id.match(e.empId)})[0],v=n.filter(function(t){return t._id.match(e.rtId)})[0];for(var f in e)i.push({key:f,values:e[f]});var b=[];return l&&l.length>0&&l.map(function(e){return b.push(i.filter(function(t){return t.key===e})[0])}),r.a.createElement("div",{className:"row",key:t},b.map(function(e,t){return"_id"!==e.key?!isNaN(Date.parse(e.values))&&String(e.values).length>15?r.a.createElement("div",{key:t,className:_e(e.key,"div")},new Date(e.values).getDate(),"/",new Date(e.values).getMonth()+1,"/",new Date(e.values).getFullYear()):r.a.createElement("div",{key:t,className:_e(e.key,"div"),style:{wordBreak:"break-word"}},e.values):null}),c?r.a.createElement($e,{cond:[c,d],div:"col s2"},r.a.createElement("span",{id:c._id,className:"link",onClick:u},c.nome)):r.a.createElement("div",{className:"col s1"}," "),v?r.a.createElement($e,{cond:[v,m],div:"col s1"},r.a.createElement("span",{id:v._id,className:"link",onClick:p},v.nomeRt)):r.a.createElement("div",{className:"col s1"}," "),r.a.createElement($e,{cond:!E,div:"col s1"},r.a.createElement("span",{id:"".concat(e._id,"z"),className:"link",onClick:h},"Ver arquivos")),r.a.createElement("div",{className:"col s1 center"},r.a.createElement("input",{id:e._id,type:"radio",name:"group1",onClick:o,value:b.map(function(e){return"_id"===e.key?"".concat(e.values):void 0}),defaultChecked:s===e._id}),r.a.createElement("label",{htmlFor:e._id}," ")))}):r.a.createElement("div",{style:{textAlign:"center",padding:"4% 0"}},r.a.createElement("strong",null,"Nenhum processo encontrado.")))},tt=function(e){var t,a=e.setColor,n=e.search,i=e.searchArray,o=e.selectProcess,s=e.submitFiles,l=e.data,c=e.redux,d=e.children,m=e.empDetails,u=e.rtDetails;return l.selectedId&&(t=c.processCollection.filter(function(e){return e._id.match(l.selectedId)})),r.a.createElement("div",{className:"container",style:{width:"90%"}},r.a.createElement(ve,{title:"Solicitar Diretrizes Metropolitanas",subtitle:'Para solicitar diretrizes metropolitanas, selecione o processo na lista abaixo, \r fa\xe7a o upload dos documentos necess\xe1rios em pdf e clique em "Solicitar Diretrizes".',color:a}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s11"},r.a.createElement("label",null,"Filtrar"),r.a.createElement("input",{className:"input",type:"text",name:"search",onChange:n})),r.a.createElement("div",{className:"col s1 right",style:{paddingTop:"35px"}},r.a.createElement("i",{className:"material-icons"},"search"))),r.a.createElement("div",{className:"z-depth-3",style:{padding:"0px 10px 1px",borderRadius:"10px"}},r.a.createElement(et,{search:i,collection:c.empCollection,rtCollection:c.rtCollection,onSelect:o,checked:l.checked,color:a,fields:["_id","nProcess","nomeEmpreendimento","modalidade","area","munEmpreendimento","status","tecnico"],renderEmp:!0,renderRt:!0,empDetails:m,rtDetails:u,ocultarArquivos:!0})),r.a.createElement("div",{className:"row",style:{marginTop:"15px"}},r.a.createElement("div",{className:"col s1 right"},r.a.createElement(de,{disabled:null===l.checked,icon:"clear",onClick:e.clear}))),r.a.createElement("div",null,l.selectedId&&l.checked?r.a.createElement("div",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,t[0].nomeEmpreendimento," - Documentos para solicita\xe7\xe3o de diretrizes"),d),r.a.createElement("button",{className:"btn teal darken-3 right",style:{marginBottom:"20px"},onClick:s},"Solicitar Diretrizes")):void 0))},at=function(e){return r.a.createElement("div",{className:"row",style:{padding:"10px",paddingLeft:"20px",paddingRight:"20px",margin:0}},r.a.createElement("label",{style:{fontSize:"16px",paddingTop:"15px",fontWeight:450,color:"black"}},e.object.label),r.a.createElement("div",{className:"row file-field input-field",key:e.object.nameInput},r.a.createElement("div",{className:"file-path-wrapper row"},r.a.createElement("div",{className:"col s11"},r.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Carregar arquivo"})),r.a.createElement("div",{className:"col s1 right"},r.a.createElement("i",{className:"material-icons grey-text text-darken-1 small"},"attach_file"),r.a.createElement("input",{type:"file",name:e.object.nameInput,onChange:e.upload})))))},nt=function(e){function t(){var e;return Object(G.a)(this,t),(e=Object(J.a)(this,Object(Y.a)(t).call(this))).state={searchValue:"",dataMatch:[],toggleUpload:!1,selectedId:"",checked:null,files:[],form:null,dirMunFile:"",levPlanFile:"",dirDaeFile:"",showEmpDetails:!1,showRtDetails:!1,empId:"",rtId:""},e.escFunction=function(t){27===t.keyCode&&e.closeDetails()},e}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.redux,t=e.empCollection,a=e.rtCollection,n=e.processCollection,r=e.tecCollection;t[0]||this.props.loadEmpData(),n[0]||this.props.loadProcessData(),a[0]||this.props.loadRtData(),r[0]||this.props.loadTecnicos(),this.props.loadFilesData(),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"handleSearch",value:function(e){this.setState(Object(h.a)({},this.state,{searchValue:e.target.value,checked:!1})),document.getElementsByName("group1").forEach(function(e){return e.checked=!1})}},{key:"clearSearch",value:function(e){this.setState(Object(h.a)({},this.state,{searchValue:"",checked:null})),document.getElementsByName("search")[0].value="",document.getElementsByName("group1").forEach(function(e){e.checked=!1})}},{key:"handleSelect",value:function(){var e=Object(V.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState(Object(h.a)({},this.state,{selectedId:t.target.value.replace(/,/g,""),checked:t.currentTarget.id}));case 2:document.getElementById(this.state.checked).checked="checked";case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fileUpload",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("processId",this.state.selectedId),this.setState(Object(h.a)({},this.state,Object(ie.a)({},t.target.name,t.target.files[0]))),n=[],e.next=6,Te.map(function(e){return n.push(e.nameInput)});case 6:return e.next=8,n.forEach(function(e){for(var t in r.state)t.match(e)&&a.append(e,r.state[t])});case 8:this.setState({form:a});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r,i,o,s,l,c,d,m,u=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props.redux.processCollection.filter(function(e){return e._id.match(u.state.selectedId)})[0],n=this.props.redux.empCollection.filter(function(e){return e._id.match(a.empId)})[0],r=this.props.redux.rtCollection.filter(function(e){return e._id.match(a.rtId)})[0],i=a.modalidade,o=a.nomeEmpreendimento,s=a.munEmpreendimento,l=this.props.redux.tecCollection,c=l.filter(function(e){return e.municipios.some(function(e){return e===a.munEmpreendimento})})[0],d=Object(h.a)({},localStorage),m=[],this.props.loading(!0),e.prev=10,e.next=13,I.a.post("/api/solDirUpload",this.state.form).then(function(e){for(var t in e.data.file)m.push({fieldName:e.data.file[t][0].fieldname,id:e.data.file[t][0].id,originalName:e.data.file[t][0].originalname,uploadDate:e.data.file[t][0].uploadDate,contentType:e.data.file[t][0].contentType,fileSize:e.data.file[t][0].size})});case 13:return e.next=15,I.a.put("/api/editProcess",{item:{_id:this.state.selectedId,status:"Aguardando Diretrizes Metropolitanas",tecnico:c.name+" "+c.surName},processHistory:{label:"Diretrizes metropolitanas solicitadas",createdAt:new Date,files:m,user:{nome:d.name+" "+d.surName,email:d.email}}});case 15:return this.props.loading(!1),e.next=18,_("sucess","Diretrizes Metropolitanas solicitadas.");case 18:return e.next=20,se(n.email,r.emailRt,n.nome,i,o,s,"Diretrizes Metropolitanas solicitadas.");case 20:return e.next=22,this.clearSearch();case 22:return e.next=24,this.closeDetails();case 24:this.props.loadProcessData()&&this.props.loadFilesData(),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(10),H(e.t0);case 30:case"end":return e.stop()}},e,this,[[10,27]])}));return function(t){return e.apply(this,arguments)}}()},{key:"empDetails",value:function(e){this.setState({showEmpDetails:!0,showRtDetails:!1,empId:e.target.id})}},{key:"rtDetails",value:function(e){this.setState({showEmpDetails:!1,showRtDetails:!0,rtId:e.target.id})}},{key:"closeDetails",value:function(){this.setState({showEmpDetails:!1,showRtDetails:!1,empId:"",rtId:""})}},{key:"render",value:function(){var e=this,t=this.state.dataMatch,a=this.props.redux.processCollection.filter(function(e){return"Processo cadastrado"===e.status}),n=this.state.searchValue.toLowerCase();return t=a&&n&&!this.state.checked?a.filter(function(e){return e.nomeEmpreendimento.toLowerCase().match(n)}):a&&(this.state.checked||this.state.checked&&n)?a.filter(function(t){return t._id.toLowerCase().match(e.state.selectedId)}):a,r.a.createElement("div",null,r.a.createElement(tt,{data:this.state,redux:this.props.redux,search:this.handleSearch.bind(this),searchArray:t,selectProcess:this.handleSelect.bind(this),submitFiles:this.handleSubmit.bind(this),setColor:this.props.redux.setColor,clear:this.clearSearch.bind(this),empDetails:this.empDetails.bind(this),rtDetails:this.rtDetails.bind(this)},Te.map(function(t,a){return r.a.createElement(at,{object:t,key:a,upload:e.fileUpload.bind(e)})})),r.a.createElement(ze,{empId:this.state.empId,rtId:this.state.rtId,showEmp:this.state.showEmpDetails,showRt:this.state.showRtDetails,close:this.closeDetails.bind(this),empCollection:this.props.redux.empCollection,rtCollection:this.props.redux.rtCollection}))}}]),t}(n.Component);var rt=Object(l.connect)(function(e){return{redux:e.cadastro}},function(e){return Object(s.b)({loadEmpData:R,loadRtData:j,loadProcessData:P,loadFilesData:F,loadTecnicos:L,loading:z,setColor:M},e)})(nt),it=a(37),ot=a(36),st=a.n(ot),lt=(a(201),a(106)),ct=a.n(lt),dt=a(107),mt=a.n(dt);function ut(e,t,a){return function(){var n=Object(V.a)(U.a.mark(function n(r){return U.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,I.a.put("/api/editProcess/",{item:Object(ie.a)({_id:t},a,e)}).then(r(P()));case 3:n.next=9;break;case 5:n.prev=5,n.t0=n.catch(0),console.log(n.t0),r(H(!1));case 9:case"end":return n.stop()}},n,null,[[0,5]])}));return function(e){return n.apply(this,arguments)}}()}var pt=function(e){var t,a=e.setColor,n=e.search,i=e.searchArray,o=e.selectProcess,s=e.submitFiles,l=e.data,c=e.redux,d=e.children,m=e.empDetails,u=e.rtDetails,p=e.showFiles;return l.selectedId&&(t=c.processCollection.filter(function(e){return e._id.match(l.selectedId)})),r.a.createElement("div",{className:"container",style:{width:"90%"}},r.a.createElement(ve,{title:"Diretrizes Metropolitanas",subtitle:'Para a emiss\xe3o de diretrizes metropolitanas, selecione o processo, \r verifique os requisitos, fa\xe7a o upload da diretriz em pdf e clique em "Emitir Diretrizes".',color:a}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s11"},r.a.createElement("label",null,"Filtrar"),r.a.createElement("input",{className:"input",type:"text",name:"search",onChange:n})),r.a.createElement("div",{className:"col s1 right",style:{paddingTop:"35px"}},r.a.createElement("i",{className:"material-icons"},"search"))),r.a.createElement("div",{className:"z-depth-3",style:{width:"100%",padding:"0px 10px 1px",borderRadius:"10px"}},r.a.createElement(et,{search:i,collection:c.empCollection,rtCollection:c.rtCollection,processCollection:c.processCollection,onSelect:o,checked:l.checked,color:a,fields:["_id","nProcess","nomeEmpreendimento","munEmpreendimento","tecnico","cgt","vistoria"],renderEmp:!0,renderRt:!0,empDetails:m,rtDetails:u,showFiles:p})),r.a.createElement("div",{className:"row",style:{marginTop:"15px"}},r.a.createElement("div",{className:"col s1 right"},r.a.createElement(de,{disabled:null===l.checked,icon:"clear",onClick:e.clear,showFiles:p}))),r.a.createElement("div",null,l.selectedId&&l.checked?r.a.createElement("div",null,r.a.createElement("fieldset",null,r.a.createElement("legend",null,t[0].nomeEmpreendimento," - Diretrizes Metropolitanas"),d)):null,l.anexaDiretriz?r.a.createElement("button",{className:"btn teal darken-3 right",style:{marginBottom:"30px"},type:"submit",onClick:s},"Emitir Diretrizes Metropolitanas"):null))},ht=function(e){var t=e.processCollection,a=e.selectedId,n=e.checkItem,i=e.change,o=e.dirStatus,s=e.anexaDiretriz,l=e.enviaPendencias,c=e.showCalendar,d=t.filter(function(e){return e._id.match(a)})[0];return r.a.createElement("div",{className:"row col s12 fieldsetChild"},r.a.createElement("form",{action:"#"},[["CGT","cgt","cgtOk"],["Vistoria","vistoria","vistoriaOk"],["Diretriz Municipal","dirMunOk","dirMunOk"],["Pagamento da DAE","daeOk","daeOk"]].map(function(e,t){return("cgt"!==e[1]||"cgt"===e[1]&&d.area>3e5)&&r.a.createElement("div",{className:"row",key:t},r.a.createElement("input",{type:"checkbox",id:e[2],onClick:n}),r.a.createElement("label",{htmlFor:e[2],style:{color:"black",fontWeight:500}},e[0]),function(e){return"cgt"===e[1]||"vistoria"===e[1]?d[e[1]]===e[0]+" n\xe3o agendada"?r.a.createElement("span",null,r.a.createElement("strong",null,": "),r.a.createElement("span",{id:e[1],onClick:c,style:{textDecoration:"underline",cursor:"pointer",color:"blue"}},"Agendar ","".concat(e[0]))):r.a.createElement("span",null,r.a.createElement("strong",null,": "),r.a.createElement("span",null,Ge(d[e[1]]),r.a.createElement("span",{style:{cursor:"pointer"}}," ",r.a.createElement("i",{id:e[1],onClick:c,title:"Reagendar ".concat(e[0]),className:"material-icons"},"calendar_today"),"  "))):d[e[1]]}(e))}),!1===s?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("label",{htmlFor:"pendText"},"Registrar pend\xeancias"),r.a.createElement("textarea",{className:"materialize-textarea",id:"pendText",onChange:i,value:o.pendencias}),r.a.createElement("button",{className:"btn red right",style:{marginBottom:"10px"},onClick:l},"Enviar Pend\xeancias"))):r.a.createElement("div",null,r.a.createElement("label",{style:{fontSize:"1.3rem",paddingTop:"3%",fontFamily:"Calibri",fontWeight:600,color:"black"}},"Anexar Diretriz Metropolitana"),r.a.createElement("div",{className:"row file-field input-field"},r.a.createElement("div",{className:"file-path-wrapper row"},r.a.createElement("div",{className:"col s11"},r.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Carregar arquivo"})),r.a.createElement("div",{className:"col s1 right"},r.a.createElement("i",{className:"material-icons grey-text text-darken-1 small"},"attach_file"),r.a.createElement("input",{type:"file",name:"diretrizFile",onChange:e.upload})))))))},Et=function(e){var t,a=e.showFiles,n=e.close,i=e.processCollection,o=e.selectedId,s=e.filesCollection,l=i.filter(function(e){return e._id.match(o)});return s&&s[0]&&(t=s.filter(function(e){return e.metadata.processId.match(o)})),a&&l&&l[0]&&t&&t[0]?r.a.createElement("div",{className:"container z-depth-3",style:{position:"fixed",top:"8%",right:"15%",left:"15%",height:"85%",borderRadius:"15px",backgroundColor:"#fbfbfb",padding:"15px 0px 0px 30px",border:"1px solid #ddd",marginBottom:"25px",marginTop:"25px",overflowY:"auto",overflowX:"hidden",zIndex:1}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,r.a.createElement("img",{alt:"",src:"/images/folderIcon2.jpg",style:{paddingLeft:"20px",marginRight:"20px"}}),"Arquivos > ",l[0].nomeEmpreendimento)),r.a.createElement("hr",{style:{marginBottom:"5px"}}),r.a.createElement("div",{className:"row",style:{marginBottom:0}},r.a.createElement("div",{className:"col s6"},r.a.createElement("div",{className:"col s1"},r.a.createElement("img",{alt:"",src:"/images/multipleFiles2.png"})),r.a.createElement("div",{className:"col s11"},r.a.createElement("h6",{style:{fontSize:"1.2em",fontWeight:500}},"Arquivo"))),r.a.createElement("div",{className:"col s3"},r.a.createElement("h6",{style:{fontSize:"1.2em",fontWeight:500}},"Data de Upload")),r.a.createElement("div",{className:"col s3"},r.a.createElement("h6",{style:{fontSize:"1.2em",fontWeight:500}},"Tamanho"))),r.a.createElement("hr",{style:{margin:"0 0 20px 0"}}),t.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("div",{className:"col s1"},r.a.createElement("img",{alt:"",src:"/images/genericFile.png"})),r.a.createElement("div",{className:"col s11"},r.a.createElement("span",{id:e._id,style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(t){return Ye(t,e.metadata.originalName)}},Me(e.metadata.fieldName)))),r.a.createElement("div",{className:"col s3"},Ge(e.uploadDate)),r.a.createElement("div",{className:"col s3"},We(e.length))))})),r.a.createElement("div",{style:{position:"absolute",top:"0.5%",right:"0.5%"}},r.a.createElement(he,{close:n}))):a&&l&&l[0]&&t&&!t[0]?r.a.createElement("div",{className:"card",style:{position:"fixed",top:"30%",right:"33%",left:"33%",backgroundColor:"white",paddingLeft:"20px",borderRadius:"15px",padding:"15px 0px 0px 30px",border:"1px solid #ddd",marginBottom:"25px",marginTop:"25px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"row"},r.a.createElement("h5",null,"Arquivos > ",l[0].nomeEmpreendimento)),r.a.createElement("div",{className:"col s6"},"Nenhum arquivo encontrado")),r.a.createElement("div",{style:{position:"absolute",top:"0%",right:"0%"}},r.a.createElement(he,{close:n}))):null},vt=function(e){function t(){var e;return Object(G.a)(this,t),(e=Object(J.a)(this,Object(Y.a)(t).call(this))).state={searchValue:"",dataMatch:[],selectedId:"",checked:null,files:[],form:null,diretrizFile:"",showEmpDetails:!1,showRtDetails:!1,empId:"",rtId:"",showFiles:!1,filesCollection:"",daeDir:"",anexaDiretriz:!1,m:st()(),cgtCalendar:!1,vistoriaCalendar:!1,dirStatus:{label:"Pend\xeancias na emiss\xe3o de Diretrizes",createdAt:"",cgtOk:!1,vistoriaOk:!1,daeOk:!1,dirMunOk:!1,pendencias:""}},e.setDate=function(t){e.state.cgtCalendar?e.setState({m:t._d,cgt:t._d}):e.setState({m:t._d,vistoria:t._d})},e.renderInput=function(e,t,a){return e.style={marginBottom:"0px",backgroundColor:"#F8F8FF",fontWeight:500},e.className="center-align",r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons right",style:{cursor:"pointer",color:"red"},onClick:a},"close"),r.a.createElement("i",{className:"material-icons",style:{cursor:"pointer",color:"gold"},onClick:function(){e.onChange({target:{value:""}})}},"backspace"),r.a.createElement("input",Object.assign({className:"red"},e)))},e.escFunction=e.escFunction.bind(Object(it.a)(Object(it.a)(e))),e}return Object(X.a)(t,e),Object(W.a)(t,[{key:"escFunction",value:function(e){27===e.keyCode&&((this.state.cgtCalendar||this.state.vistoriaCalendar)&&this.hideCalendar(),this.closeDetails())}},{key:"componentDidMount",value:function(){var e=this.props.redux,t=e.empCollection,a=e.rtCollection,n=e.processCollection,r=e.tecCollection;t[0]||this.props.loadEmpData(),n[0]||this.props.loadProcessData(),a[0]||this.props.loadRtData(),r[0]||this.props.loadTecnicos(),this.props.loadFilesData(),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"handleSearch",value:function(e){var t=this.state.dirStatus;t.cgtOk=!1,t.vistoriaOk=!1,t.dirMunOk=!1,t.daeOk=!1,this.setState(Object(h.a)({},this.state,{searchValue:e.target.value,checked:!1,anexaDiretriz:!1,dirStatus:t})),document.getElementsByName("group1").forEach(function(e){return e.checked=!1})}},{key:"clearSearch",value:function(e){var t=this.state.dirStatus;t.cgtOk=!1,t.vistoriaOk=!1,t.dirMunOk=!1,t.daeOk=!1,this.setState(Object(h.a)({},this.state,{searchValue:"",checked:null,dirStatus:t,anexaDiretriz:!1})),document.getElementsByName("search")[0].value="",document.getElementsByName("group1").forEach(function(e){e.checked=!1})}},{key:"handleSelect",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState(Object(h.a)({},this.state,{selectedId:t.target.value.replace(/,/g,""),checked:t.currentTarget.id}));case 2:document.getElementById(this.state.checked).checked="checked",a=this.props.redux.processCollection.filter(function(e){return e._id.match(r.state.selectedId)})[0],n=Object(h.a)({},this.state.dirStatus),a.area<=3e5&&(n.cgtOk=!0,this.setState({dirStatus:n}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fileUpload",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("processId",this.state.selectedId),e.next=4,this.setState(Object(h.a)({},this.state,Object(ie.a)({},t.target.name,t.target.files[0])));case 4:return e.next=6,a.append("diretrizFile",this.state.diretrizFile);case 6:this.setState({form:a});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r,i,o,s,l,c,d,m,u=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a="Diretrizes Metropolitanas emitidas",n=this.props.redux.processCollection.filter(function(e){return e._id.match(u.state.selectedId)})[0],r=this.props.redux.empCollection.filter(function(e){return e._id.match(n.empId)})[0],i=this.props.redux.rtCollection.filter(function(e){return e._id.match(n.rtId)})[0],o=n.modalidade,s=n.nomeEmpreendimento,l=n.munEmpreendimento,c=Object(h.a)({},localStorage),d=[],this.props.loading(!0),e.prev=9,e.next=12,I.a.post("/api/diretrizUpload",this.state.form).then(function(e){for(var t in e.data.file)d.push(e.data.file[t][0].fieldname,e.data.file[t][0].id,e.data.file[t][0].originalname,e.data.file[t][0].uploadDate,e.data.file[t][0].size,e.data.file[t][0].contentType)});case 12:return m={fieldName:d[0],id:d[1],originalName:d[2],uploadDate:d[3],fileSize:d[4],contentType:d[5]},e.next=15,I.a.put("/api/editProcess",{item:{_id:this.state.selectedId,status:a,tecnico:c.name+" "+c.surName},processHistory:{label:a,createdAt:new Date,files:[m],user:{nome:c.name+" "+c.surName,email:c.email}}});case 15:return this.props.loading(!1),e.next=18,_("sucess",a);case 18:return e.next=20,se(r.email,i.emailRt,r.nome,o,s,l,a+".");case 20:return e.next=22,this.clearSearch();case 22:return e.next=24,this.closeDetails();case 24:this.props.loadProcessData()&&this.props.loadFilesData(),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(9),H(e.t0);case 30:case"end":return e.stop()}},e,this,[[9,27]])}));return function(t){return e.apply(this,arguments)}}()},{key:"empDetails",value:function(e){this.setState({showEmpDetails:!0,showRtDetails:!1,empId:e.target.id})}},{key:"rtDetails",value:function(e){this.setState({showEmpDetails:!1,showRtDetails:!0,rtId:e.target.id})}},{key:"closeDetails",value:function(){this.setState({showEmpDetails:!1,showRtDetails:!1,showFiles:!1,empId:"",rtId:""})}},{key:"showFiles",value:function(e){this.setState({showFiles:!0,selectedId:e.target.id.replace(/z/g,"")})}},{key:"checkItem",value:function(e){var t=e.target.id,a=this.state.dirStatus;a[t]=!this.state.dirStatus[t];var n=a.cgtOk,r=a.vistoriaOk,i=a.daeOk,o=a.dirMunOk;!0===n&&!0===r&&!0===o&&!0===i?this.setState({anexaDiretriz:!0}):this.setState({anexaDiretriz:!1})}},{key:"handleChange",value:function(e){var t=e.target.value,a=this.state.dirStatus;a.pendencias=t,this.setState({dirStatus:a})}},{key:"enviaPendencias",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r,i,o,s,l,c,d,m=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props.redux.processCollection.filter(function(e){return e._id.match(m.state.selectedId)})[0],n=this.props.redux.empCollection.filter(function(e){return e._id.match(a.empId)})[0],r=this.props.redux.rtCollection.filter(function(e){return e._id.match(a.rtId)})[0],i=a.modalidade,o=a.nomeEmpreendimento,s=a.munEmpreendimento,l=Object(h.a)({},localStorage),c="Pend\xeancias para emiss\xe3o de Diretrizes Metropolitanas.",d=this.state.dirStatus,this.props.loading(!0),e.prev=9,e.next=12,I.a.put("/api/editProcess",{item:{_id:this.state.selectedId,status:"Processo cadastrado",tecnico:l.name+" "+l.surName},processHistory:{label:"Pend\xeancias para emiss\xe3o de diretrizes",createdAt:new Date,pendencias:d.pendencias,dirCheckList:{cgtOk:d.cgtOk,vistoriaOk:d.vistoriaOk,daeOk:d.daeOk,dirMunOk:d.dirMunOk},user:{nome:l.name+" "+l.surName,email:l.email}}});case 12:return e.next=14,this.props.loading(!1);case 14:return e.next=16,_("sucess",c);case 16:return e.next=18,se(n.email,r.emailRt,n.nome,i,o,s,c);case 18:return e.next=20,this.clearSearch();case 20:return e.next=22,this.closeDetails();case 22:this.props.loadProcessData(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(9),H(e.t0);case 28:case"end":return e.stop()}},e,this,[[9,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"showCalendar",value:function(e){this.setState(Object(h.a)({},this.state,Object(ie.a)({},"".concat(e.target.id,"Calendar"),!0)))}},{key:"hideCalendar",value:function(e){var t;t=this.state.cgtCalendar?"cgt":"vistoria",this.setState(Object(h.a)({},this.state,Object(ie.a)({},"".concat(t,"Calendar"),!1))),this.props.setDate(this.state.m,this.state.selectedId,t)}},{key:"render",value:function(){var e=this,t=this.state.dataMatch,a=this.state.searchValue.toLowerCase(),n=this.props.redux.processCollection.filter(function(e){return"Aguardando Diretrizes Metropolitanas"===e.status});return t=a&&!this.state.checked?n.filter(function(e){return e.nomeEmpreendimento.toLowerCase().match(a)}):this.state.checked||this.state.checked&&a?n.filter(function(t){return t._id.toLowerCase().match(e.state.selectedId)}):n,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(pt,{data:this.state,redux:this.props.redux,search:function(t){return e.handleSearch(t)},searchArray:t,selectProcess:this.handleSelect.bind(this),submitFiles:this.handleSubmit.bind(this),setColor:this.props.redux.setColor,clear:this.clearSearch.bind(this),empDetails:this.empDetails.bind(this),rtDetails:this.rtDetails.bind(this),showFiles:this.showFiles.bind(this)},r.a.createElement(ht,{selectedId:this.state.selectedId,showFiles:this.state.showFiles,checkItem:this.checkItem.bind(this),close:this.closeDetails.bind(this),processCollection:this.props.redux.processCollection,filesCollection:this.props.redux.filesCollection,upload:this.fileUpload.bind(this),dirStatus:this.state.dirStatus,change:this.handleChange.bind(this),enviaPendencias:this.enviaPendencias.bind(this),anexaDiretriz:this.state.anexaDiretriz,showCalendar:this.showCalendar.bind(this),cgtCalendar:this.state.cgtCalendar,vistoriaCalendar:this.state.vistoriaCalendar})),this.state.cgtCalendar||this.state.vistoriaCalendar?r.a.createElement("div",{style:{position:"fixed",top:"33%",right:"43%",width:"253px",border:"2px solid #ddd",backgroundColor:"white"}},r.a.createElement(ct.a,{renderInput:this.renderInput,className:mt.a,input:!0,open:!0,inputProps:{readOnly:!0},value:this.state.m,onChange:this.setDate.bind(this),onBlur:this.hideCalendar.bind(this)})):void 0,r.a.createElement(ze,{empId:this.state.empId,rtId:this.state.rtId,showEmp:this.state.showEmpDetails,showRt:this.state.showRtDetails,close:this.closeDetails.bind(this),empCollection:this.props.redux.empCollection,rtCollection:this.props.redux.rtCollection})),r.a.createElement("div",null,r.a.createElement(Et,{selectedId:this.state.selectedId,showFiles:this.state.showFiles,close:this.closeDetails.bind(this),processCollection:this.props.redux.processCollection,filesCollection:this.props.redux.filesCollection})),"}")}}]),t}(n.Component);var ft=Object(l.connect)(function(e){return{redux:e.cadastro}},function(e){return Object(s.b)({loadEmpData:R,loadRtData:j,loadProcessData:P,loadTecnicos:L,loadFilesData:F,loading:z,setColor:M,setDate:ut},e)})(vt),bt=function(e){var t,a=e.setColor,n=e.search,i=e.searchArray,o=e.selectProcess,s=e.submitFiles,l=e.data,c=e.redux,d=e.children,m=e.empDetails,u=e.rtDetails,p=e.showFiles;return l.selectedId&&(t=c.processCollection.filter(function(e){return e._id.match(l.selectedId)})),r.a.createElement("div",{className:"container",style:{width:"90%"}},r.a.createElement(ve,{title:"Solicitar Anu\xeancia Pr\xe9via",subtitle:'Para solicitar anu\xeancia pr\xe9via, selecione o processo, fa\xe7a o upload dos documentos \r e projetos e clique em "Solicitar Anu\xeancia".',color:a}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s11"},r.a.createElement("label",null,"Filtrar"),r.a.createElement("input",{className:"input",type:"text",name:"search",onChange:n})),r.a.createElement("div",{className:"col s1 right",style:{paddingTop:"35px"}},r.a.createElement("i",{className:"material-icons"},"search"))),r.a.createElement("div",{className:"z-depth-3",style:{padding:"0px 10px 1px",borderRadius:"10px"}},r.a.createElement(et,{search:i,collection:c.empCollection,rtCollection:c.rtCollection,onSelect:o,checked:l.checked,color:a,fields:["_id","nProcess","nomeEmpreendimento","modalidade","munEmpreendimento","status","tecnico"],renderEmp:!0,renderRt:!0,empDetails:m,rtDetails:u,showFiles:p})),r.a.createElement("div",{className:"row",style:{marginTop:"15px"}},r.a.createElement("div",{className:"col s1 right"},r.a.createElement(de,{disabled:null===l.checked,icon:"clear",onClick:e.clear}))),r.a.createElement("div",null,l.selectedId&&l.checked?r.a.createElement("div",null,r.a.createElement("fieldset",null,r.a.createElement("legend",{style:{fontSize:"1.3rem"}},t[0].nomeEmpreendimento," - Documentos para solicita\xe7\xe3o de anu\xeancia pr\xe9via"),r.a.createElement("div",{className:"row"},d[0])),r.a.createElement("fieldset",null,r.a.createElement("legend",{style:{fontSize:"1.3rem"}},t[0].nomeEmpreendimento," - Projetos para solicita\xe7\xe3o de anu\xeancia pr\xe9via"),r.a.createElement("div",{className:"row"},d[1])),r.a.createElement("button",{className:"btn teal darken-3 right",style:{marginBottom:"20px"},onClick:s},"Solicitar Anu\xeancia")):null))},gt=function(e){return r.a.createElement("div",{style:{padding:"10px",paddingLeft:"20px",paddingRight:"20px",margin:0}},r.a.createElement("label",{style:{fontSize:"16px",paddingTop:"15px",fontWeight:450,color:"black"}},e.object.label),r.a.createElement("div",{className:"file-field input-field",key:e.object.nameInput},r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("div",{className:"col s11"},r.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Carregar arquivo"})),r.a.createElement("div",{className:"col s1 right"},r.a.createElement("i",{className:"material-icons grey-text text-darken-1 small"},"attach_file"),r.a.createElement("input",{type:"file",name:e.object.nameInput,onChange:e.upload})))))},Ct=function(e){function t(){var e;return Object(G.a)(this,t),(e=Object(J.a)(this,Object(Y.a)(t).call(this))).state={searchValue:"",dataMatch:[],selectedId:"",checked:null,files:[],form:null,showEmpDetails:!1,showRtDetails:!1,showFiles:!1,empId:"",rtId:"",regImovel:"",CNDMun:"",empRG:"",art:"",decConform:"",daeAnuencia:"",memDescritivo:"",memDescTp:"",cemig:"",dtbCopasa:"",licAmbental:"",levPlan:"",projUrb:"",mapaIso:"",projTer:"",projDren:"",projDesmemb:""},e.escFunction=function(t){27===t.keyCode&&e.closeDetails()},e}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){this.props.redux.empCollection[0]||this.props.loadEmpData(),this.props.redux.processCollection[0]||this.props.loadProcessData(),this.props.redux.rtCollection[0]||this.props.loadRtData(),this.props.redux.filesCollection[0]||this.props.loadFilesData(),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"handleSearch",value:function(e){this.setState(Object(h.a)({},this.state,{searchValue:e.target.value,checked:!1})),document.getElementsByName("group1").forEach(function(e){return e.checked=!1})}},{key:"clearSearch",value:function(e){this.setState(Object(h.a)({},this.state,{searchValue:"",checked:null})),document.getElementsByName("search")[0].value="",document.getElementsByName("group1").forEach(function(e){e.checked=!1})}},{key:"handleSelect",value:function(){var e=Object(V.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState(Object(h.a)({},this.state,{selectedId:t.target.value.replace(/,/g,""),checked:t.currentTarget.id}));case 2:document.getElementById(this.state.checked).checked="checked";case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"fileUpload",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r,i=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("processId",this.state.selectedId),this.setState(Object(h.a)({},this.state,Object(ie.a)({},t.target.name,t.target.files[0]))),n=[],(r=Re.concat(je)).push({nameInput:"projDesmemb",label:"Projeto de Desmembramento",tooltip:"Planta de localiza\xe7\xe3o com delimita\xe7\xe3o da \xe1rea em an\xe1lise e indica\xe7\xe3o do per\xedmetro urbano, em escala de 1:10000"}),e.next=8,r.map(function(e){return n.push(e.nameInput)});case 8:return e.next=10,n.forEach(function(e){for(var t in i.state)t.match(e)&&a.append(e,i.state[t])});case 10:this.setState({form:a});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r,i,o,s,l,c,d,m,u,p,E=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props.redux.processCollection,n=this.state.selectedId,r=this.props.redux.processCollection.filter(function(e){return e._id.match(E.state.selectedId)})[0],i=this.props.redux.empCollection.filter(function(e){return e._id.match(r.empId)})[0],o=this.props.redux.rtCollection.filter(function(e){return e._id.match(r.rtId)})[0],s=r.modalidade,l=r.nomeEmpreendimento,c=r.munEmpreendimento,d=Object(h.a)({},localStorage),m=function(){var e=[];a.length>0&&(e=a.filter(function(e){return e._id.match(n)})[0].processHistory.filter(function(e){return e.label}));var t=e.filter(function(e){return e.label.match("An\xe1lise")}).length;if(0===t){return"Anu\xeancia pr\xe9via solicitada"}return"Entrada "+(t+1)},u=[],this.props.loading(!0),e.prev=11,e.next=14,I.a.post("/api/solAnuenciaUpload",this.state.form).then(function(e){for(var t in e.data.file)u.push({fieldName:e.data.file[t][0].fieldname,id:e.data.file[t][0].id,originalName:e.data.file[t][0].originalname,uploadDate:e.data.file[t][0].uploadDate,contentType:e.data.file[t][0].contentType,fileSize:e.data.file[t][0].size})});case 14:return p=m(),e.next=17,I.a.put("/api/editProcess",{item:{_id:this.state.selectedId,status:"Aguardando An\xe1lise"},processHistory:{label:p,createdAt:new Date,files:u,user:{nome:d.name+" "+d.surName,email:d.email}}});case 17:return this.props.loading(!1),_("sucess","Anu\xeancia Pr\xe9via solicitada."),e.next=21,se(i.email,o.emailRt,i.nome,s,l,c,"Anu\xeancia Pr\xe9via solicitada.");case 21:return e.next=23,this.clearSearch();case 23:return e.next=25,this.closeDetails();case 25:return e.next=27,this.props.loadProcessData();case 27:if(e.t0=e.sent,!e.t0){e.next=30;break}this.props.loadFilesData();case 30:console.log(""),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(11),H(e.t1);case 36:case"end":return e.stop()}},e,this,[[11,33]])}));return function(t){return e.apply(this,arguments)}}()},{key:"empDetails",value:function(e){this.setState({showEmpDetails:!0,showRtDetails:!1,empId:e.target.id})}},{key:"rtDetails",value:function(e){this.setState({showEmpDetails:!1,showRtDetails:!0,rtId:e.target.id})}},{key:"closeDetails",value:function(){this.setState({showEmpDetails:!1,showRtDetails:!1,showFiles:!1,empId:"",rtId:""})}},{key:"showFiles",value:function(e){this.setState({showFiles:!0,selectedId:e.target.id.replace(/z/g,"")})}},{key:"render",value:function(){var e,t,a=this,n=this.state,i=n.dataMatch,o=n.selectedId,s=n.checked,l=this.props.redux.processCollection,c=this.state.searchValue.toLowerCase(),d=l.filter(function(e){return"Diretrizes Metropolitanas emitidas"===e.status||e.status.match("Pend\xeancias")||"Aguardando documenta\xe7\xe3o"===e.status});i=c&&!s?d.filter(function(e){return e.nomeEmpreendimento.toLowerCase().match(c)}):s||s&&c?d.filter(function(e){return e._id.toLowerCase().match(o)}):d;var m=[],u=[];return o&&(t=(e=l.filter(function(e){return e._id.match(o)}))[0].status),!e||"Loteamento"!==e[0].modalidade||"Diretrizes Metropolitanas emitidas"!==t&&"Pend\xeancias"!==t?!e||"Desmembramento"!==e[0].modalidade||"Aguardando documenta\xe7\xe3o"!==t&&"Pend\xeancias"!==t||(m=Pe,u=Fe):(m=Re,u=je),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(bt,{data:this.state,redux:this.props.redux,search:function(e){return a.handleSearch(e)},searchArray:i,selectProcess:this.handleSelect.bind(this),submitFiles:this.handleSubmit.bind(this),setColor:this.props.redux.setColor,clear:this.clearSearch.bind(this),empDetails:this.empDetails.bind(this),rtDetails:this.rtDetails.bind(this),array:Re,array2:je,showFiles:this.showFiles.bind(this)},m.map(function(e,t){return r.a.createElement("div",{className:"col s6",key:t},r.a.createElement(gt,{object:e,key:t,upload:a.fileUpload.bind(a)}))}),r.a.createElement("div",{className:"row"},u.map(function(e,t){return r.a.createElement("div",{className:"col s6",key:t},r.a.createElement(gt,{object:e,key:t,upload:a.fileUpload.bind(a)}))}))),r.a.createElement(Et,{selectedId:o,showFiles:this.state.showFiles,close:this.closeDetails.bind(this),processCollection:l,filesCollection:this.props.redux.filesCollection}),r.a.createElement(ze,{empId:this.state.empId,rtId:this.state.rtId,showEmp:this.state.showEmpDetails,showRt:this.state.showRtDetails,close:this.closeDetails.bind(this),empCollection:this.props.redux.empCollection,rtCollection:this.props.redux.rtCollection})))}}]),t}(n.Component);var Nt=Object(l.connect)(function(e){return{redux:e.cadastro}},function(e){return Object(s.b)({loadEmpData:R,loadRtData:j,loadProcessData:P,loadFilesData:F,setColor:M,loading:z},e)})(Ct),yt=function(e){var t=e.setColor,a=e.search,n=e.searchArray,i=e.selectProcess,o=e.data,s=e.redux,l=e.empDetails,c=e.rtDetails,d=e.showFiles;return o.selectedId&&s.processCollection.filter(function(e){return e._id.match(o.selectedId)})[0],r.a.createElement("div",{className:"container",style:{width:"95%"}},r.a.createElement(ve,{title:"Analisar Processo",subtitle:"Selecione o processo para analisar, registrar pend\xeancias ou emitir anu\xeancia pr\xe9via.",color:t}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s11"},r.a.createElement("label",null,"Filtrar"),r.a.createElement("input",{className:"input",type:"text",name:"search",onChange:a,value:o.searchValue})),r.a.createElement("div",{className:"col s1 right",style:{paddingTop:"35px"}},r.a.createElement("i",{className:"material-icons"},"search"))),r.a.createElement("div",{className:"z-depth-3",style:{width:"100%",padding:"0px 10px 1px",borderRadius:"10px"}},r.a.createElement(et,{search:n,collection:s.empCollection,rtCollection:s.rtCollection,processCollection:s.processCollection,onSelect:i,checked:o.checked,color:t,fields:["_id","nProcess","nomeEmpreendimento","modalidade","munEmpreendimento","status","tecnico"],renderEmp:!0,renderRt:!0,empDetails:l,rtDetails:c,showFiles:d})),r.a.createElement("div",{className:"row",style:{marginTop:"15px"}},o.selectedId?null:r.a.createElement("div",{className:"col s1 right"},r.a.createElement(de,{disabled:null===o.checked,icon:"clear",onClick:e.clear}))))},xt=[{name:"FileExplorer",img:"/images/gerenciarProc3.png",label:"Ver arquivos",divStyle:{minHeight:"8vh",border:"1px solid #ddd",borderRadius:"2%",borderBottom:""}},{name:"Pendencias",img:"/images/pendencias.png",label:"Registrar Pend\xeancias",divStyle:{minHeight:"8vh",border:"1px solid #ddd",borderRadius:"2%",borderBottom:"1px solid #a88"}},{name:"Anuencia",img:"/images/emitir_anuencia3.png",label:"Emitir Anu\xeancia",divStyle:{minHeight:"8vh",border:"1px solid #ddd",borderRadius:"2%",borderBottom:""}},{name:"ProcessInfo",img:"/images/process_info3.png",label:"Informa\xe7\xf5es do Processo",divStyle:{minHeight:"8vh",border:"1px solid #ddd",borderRadius:"2%",borderBottom:""}}],Ot=function(e){var t=e.process.processHistory.filter(function(e){return e.files});return r.a.createElement("div",{style:{height:"100%",overflowY:"auto",overflowX:"hidden"}},t.map(function(e,t){return r.a.createElement("div",{style:{border:"1px solid #ddd",padding:"1% 0 0 1%"},key:t+1e3},r.a.createElement("div",{className:"row",align:"center"},r.a.createElement("span",{style:{fontSize:"1rem",fontWeight:500}},e.label," em ",Ge(e.createdAt))),r.a.createElement("div",{className:"row",style:{fontSize:"0.9rem",padding:"0.8% 0",backgroundColor:"#f7f7f7",fontWeight:500,borderBottom:"1px solid #ddd",borderTop:"1px solid #ddd"}},r.a.createElement("div",{className:"col s5 left"},"Documento"),r.a.createElement("div",{className:"col s4 left"},"Nome do arquivo"),r.a.createElement("div",{className:"col s3 center"},"Tamanho")),r.a.createElement("div",{className:"row"},e.files.map(function(e,t){return r.a.createElement("div",{className:"row",key:t+100,style:{paddingLeft:"1%"}},r.a.createElement("div",{className:"col s5"},Me(e.fieldName)),r.a.createElement("div",{className:"col s4"},r.a.createElement("span",{id:e.id,key:t,style:{textDecoration:"underline",cursor:"pointer",color:"blue"},onClick:function(t){return Ye(t,e.originalName)}},e.originalName)),r.a.createElement("div",{className:"col s3 center"},We(e.fileSize)))})))}))},St=function(e){var t=e.upload,a=e.submitFiles;return r.a.createElement("div",{style:{paddingLeft:"10%",marginBottom:"10%"}},r.a.createElement("h5",null,"Emitir Anu\xeancia Pr\xe9via"),[{label:"Anexar Nota T\xe9cnica",inputName:"notaTecnica"},{label:"Anexar Certid\xe3o de Anu\xeancia Pr\xe9via",inputName:"anuenciaFile"}].map(function(e,a){return r.a.createElement("div",{style:{marginTop:"10%"},key:a},r.a.createElement("label",{style:{fontSize:"16px",paddingTop:"15px",fontWeight:450,color:"black"}},e.label),r.a.createElement("div",{className:"row file-field input-field",key:e.inputName},r.a.createElement("div",{className:"file-path-wrapper row"},r.a.createElement("div",{className:"col s11"},r.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Carregar arquivo"})),r.a.createElement("div",{className:"col s1 right"},r.a.createElement("i",{className:"material-icons grey-text text-darken-1 small"},"attach_file"),r.a.createElement("input",{type:"file",name:e.inputName,onChange:t})))))}),r.a.createElement("button",{className:"btn teal darken-3 right",style:{margin:"4% 3% 0 0"},type:"submit",onClick:a},"Emitir Anu\xeancia Pr\xe9via"))},kt=a(108),Dt=a.n(kt),wt=(a(307),a(109)),Tt=function(e){var t=e.empreend,a=e.process;var n=wt.filter(function(e){return e.municipio.toLowerCase().match(a.munEmpreendimento.toLowerCase())})[0],i={lineHeight:.8};return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("img",{className:"col s12",src:"/images/governo_header3.jpg",style:{paddingRight:"20px"},alt:""})),r.a.createElement("p",{className:"oficioHeader"},r.a.createElement("span",{className:"right"},"Belo Horizonte, ",function(){var e=new Date;return"".concat(e.getDate()," de ").concat(["janeiro","fevereiro","mar\xe7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"][e.getMonth()]," de ").concat(e.getFullYear())}(),".")),r.a.createElement("br",null),r.a.createElement("p",{className:"ql-align-justify",style:i}," ",n.vocativo1," "),r.a.createElement("p",{className:"ql-align-justify",style:i}," ",r.a.createElement("strong",null,n.nome)," "),r.a.createElement("p",{className:"ql-align-justify",style:i},n.cargo),r.a.createElement("p",{className:"ql-align-justify",style:i},"Prefeitura de ",a.munEmpreendimento),r.a.createElement("p",{className:"ql-align-justify",style:i},n.endereco),r.a.createElement("p",{className:"ql-align-justify",style:i},"CEP: ",n.cep," \u2013 ",a.munEmpreendimento,", MG"),r.a.createElement("p",null),r.a.createElement("p",{className:"ql-align-justify"},r.a.createElement("strong",null,"Assunto:"),' Empreendimento "',a.nomeEmpreendimento,'", Processo RMBH n\xba ',a.nProcess," "),r.a.createElement("p",null),r.a.createElement("p",{className:"ql-align-justify"},n.vocativo2,", "),r.a.createElement("p",{className:"ql-align-justify"},"Em resposta ao of\xedcio da Prefeitura Municipal de ",a.munEmpreendimento,", que solicita an\xe1lise e emiss\xe3o de Selo de Anu\xeancia Pr\xe9via para o ",a.modalidade," de uma \xe1rea de ",a.area,"m\xb2, situado no lugar denominado ",r.a.createElement("strong",null,a.nomeEmpreendimento),", de interesse de",r.a.createElement("strong",null," ",t.nome),", informamos que:"),r.a.createElement("p",null))},It=function(e){var t=e.mostrarOficio,a=e.content,n=e.redux,i=e.process,o=e.empreend,s=e.rt,l=e.tecnicos,c=localStorage.getItem("email"),d=l.filter(function(e){return e.email.match(c)})[0];return t?r.a.createElement("div",{id:"oficio",className:"z-depth-3",style:{position:"relative",borderRadius:"15px",width:"100%",backgroundColor:"white",padding:"15px 0px 0px 30px",border:"1px solid #ddd",marginBottom:"25px"}},r.a.createElement(Tt,{redux:n,process:i,empreend:o,rt:s}),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}}),r.a.createElement("center",null,r.a.createElement("strong",null,r.a.createElement("p",null,d.name," ",d.surName)),r.a.createElement("p",null,"CAU/MG ",d.cau))):null},At={toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]},Rt=function(e){function t(){var e,a;Object(G.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(J.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={color:"",text:"",mostrarOficio:!1,oficio:""},a}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){this.props.cadastro.empCollection[0]||this.props.loadEmpData(),this.props.cadastro.rtCollection[0]||this.props.loadRtData(),this.props.cadastro.processCollection[0]||this.props.loadProcessData();var e=document.getElementById("setcolor").style.backgroundColor;this.setState({setColor:e})}},{key:"handleChange",value:function(e){this.setState(Object(h.a)({},this.state,{text:e}))}},{key:"savePdf",value:function(){this.setState({mostrarOficio:!0})}},{key:"enviaPendencias",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r,i,o,s,l,c,d,m,u;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props,n=a.process,r=a.empreend,i=a.rt,o=n.modalidade,s=n.nomeEmpreendimento,l=n.munEmpreendimento,c=Object(h.a)({},localStorage),d=this.props.process.processHistory.filter(function(e){return e.label.match("An\xe1lise")}),m="An\xe1lise ".concat(d.length+1),u=document.getElementById("oficio").outerHTML,this.props.loading(!0),this.setState({oficio:u}),e.prev=9,e.next=12,I.a.put("/api/editProcess",{item:{_id:this.props.process._id,status:"Pend\xeancias",tecnico:c.name+" "+c.surName},processHistory:{label:m,createdAt:new Date,pendencias:u,user:{nome:c.name+" "+c.surName,email:c.email}}});case 12:return this.props.loading(!1),e.next=15,_("sucess","Pend\xeancias para a emiss\xe3o de anu\xeancia.");case 15:return e.next=17,se(r.email,i.emailRt,r.nome,o,s,l,"Pend\xeancias para a emiss\xe3o de anu\xeancia.");case 17:return e.next=19,this.props.close();case 19:this.props.loadProcessData(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),H(e.t0);case 25:case"end":return e.stop()}},e,this,[[9,22]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.empreend,n=t.rt,i=t.process,o=t.tecnicos,s=function(){return!e.state.mostrarOficio&&"disabled"};return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(Dt.a,{value:this.state.text,onChange:this.handleChange.bind(this),modules:At,theme:"snow",style:{background:"#fff",height:"50vh",marginBottom:"10px",border:"1px solid #ddd",borderRadius:"1%",overflow:"hidden"}}),r.a.createElement(It,{mostrarOficio:this.state.mostrarOficio,content:this.state.text,oficio:this.state.oficio,process:i,empreend:a,rt:n,tecnicos:o}),r.a.createElement("button",{className:"btn right",onClick:this.enviaPendencias.bind(this),disabled:s()}," Enviar "),r.a.createElement("button",{style:{marginRight:"10px"},className:"btn right",onClick:this.savePdf.bind(this),disabled:!s()}," Pr\xe9-visualizar "))}}]),t}(n.Component),jt=Object(l.connect)(function(e){return{cadastro:e.cadastro}},function(e){return Object(s.b)({loadEmpData:R,loadRtData:j,loadProcessData:P,loading:z,reduxToastr:_},e)})(Rt),Pt=function(e){var t=e.redux,a=e.clear,n=e.data,i=e.selectedOption,o=e.optionSelect,s=e.process,l=e.empreend,c=e.rt,d=e.divConfig,m=e.changeValue,u=e.showLog,p=e.clearLog,h=e.log,E=e.close,v=e.upload,f=e.submit;return r.a.createElement("div",{className:"container",style:{width:"90%"}},r.a.createElement("div",null,r.a.createElement("div",{className:"row",align:"center",style:{border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#efefef",fontSize:"1.2rem",fontFamily:"calibri",marginTop:"15px"}},r.a.createElement("h4",null,s.nomeEmpreendimento),r.a.createElement("div",{className:"row col s12"},r.a.createElement("div",{className:"col s12 m6 l4"},r.a.createElement("b",null,"Munic\xedpio:"),"  ",s.munEmpreendimento),r.a.createElement("div",{className:"col s12 m6 l4"},r.a.createElement("b",null,"Modalidade:")," ",s.modalidade),r.a.createElement("div",{className:"col s12 m6 l4"},r.a.createElement("b",null,"\xc1rea:")," ",s.area),r.a.createElement("div",{className:"col s12 m6 l4"},r.a.createElement("b",null," Empreendedor: ")," ",l.nome),r.a.createElement("div",{className:"col s12 m6 l4"},r.a.createElement("b",null,"RT: "),c.nomeRt),r.a.createElement("div",{className:"col s12 m6 l4"},s.status))),r.a.createElement("div",{className:"row",style:{marginBottom:0,cursor:"pointer"}},xt.map(function(e,t){return r.a.createElement("div",{id:e.name,key:t,align:"center",className:"col s12 m6 l3 ".concat(d(e).class),style:d(e).stylez,onClick:o},r.a.createElement("img",{id:e.name,className:"center-align",src:e.img,style:{margin:"10px 10px 0px 10px",cursor:"pointer"},height:"40",alt:""}),r.a.createElement("h6",{id:e.name,style:{cursor:"pointer",fontWeight:550}},e.label))})),r.a.createElement("div",{style:{minHeight:"50vh",border:"1px solid #ddd",borderRadius:"2%",marginBottom:"2%"}},""===i?r.a.createElement("div",{className:"col push-s4",style:{paddingTop:"20%"}},r.a.createElement("h5",null,"Selecione uma das op\xe7oes acima.")):r.a.createElement("div",{className:"col s12",style:{height:"100%"}},function(e){switch(e){case"FileExplorer":return r.a.createElement(Ot,{selectedId:n.selectedId,showFiles:n.showFiles,close:E,processCollection:t.processCollection,filesCollection:t.filesCollection,process:s});case"Pendencias":return r.a.createElement(jt,{process:s,empreend:l,rt:c,tecnicos:t.tecCollection,value:n.analiseProc.pendencias,changeValue:m,close:E});case"Anuencia":return r.a.createElement(St,{upload:v,submitFiles:f});case"ProcessInfo":return r.a.createElement(Ke,{process:s,showLog:u,logDetails:h.logDetails,index:h.logIndex,clearLog:p});default:console.log("invalid option, dude!")}}(i))),h.logDetails&&"ProcessInfo"===i?null:r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s1 left"},r.a.createElement(de,{disabled:null===n.checked,icon:"arrow_back",onClick:a})," Voltar"))))},Ft=function(e){function t(){var e,a;Object(G.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(J.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={selectedOption:"",selectedId:"",logDetails:!1,logIndex:"",notaTecnica:"",anuenciaFile:"",form:""},a}return Object(X.a)(t,e),Object(W.a)(t,[{key:"optionSelect",value:function(e){this.setState({selectedOption:e.target.id})}},{key:"componentDidMount",value:function(){this.setState({selectedId:this.props.data.selectedId})}},{key:"componentWillUnmount",value:function(){this.props.clear()}},{key:"divConfig",value:function(e){if(e.name!==this.state.selectedOption){return{stylez:{minHeight:"8vh",border:"1px solid #ddd",borderRadius:"2%",borderBottom:"",borderTopLeftRadius:"15%",borderTopRightRadius:"15%"},class:"col s12 m6 l3 z-depth-2"}}return{stylez:{minHeight:"8vh",border:"2px solid #bbb",borderRadius:"2%",borderBottom:"",borderTopLeftRadius:"15%",borderTopRightRadius:"15%",backgroundColor:"#fcfcfc"},class:"col s12 m6 l3"}}},{key:"showLog",value:function(e){this.setState({logIndex:e.target.id,logDetails:!0})}},{key:"clearLog",value:function(){this.setState({logDetails:!1,logIndex:""})}},{key:"fileUpload",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=["notaTecnica","anuenciaFile"],(n=new FormData).append("processId",this.state.selectedId),e.next=5,this.setState(Object(h.a)({},this.state,Object(ie.a)({},t.target.name,t.target.files[0])));case 5:return e.next=7,a.forEach(function(e){for(var t in r.state)t.match(e)&&n.append(e,r.state[t])});case 7:this.setState({form:n});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r,i,o,s,l,c,d,m=this;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.props.redux.processCollection.filter(function(e){return e._id.match(m.props.data.selectedId)})[0],n=this.props.redux.empCollection.filter(function(e){return e._id.match(a.empId)})[0],r=this.props.redux.rtCollection.filter(function(e){return e._id.match(a.rtId)})[0],i=a.modalidade,o=a.nomeEmpreendimento,s=a.munEmpreendimento,l=Object(h.a)({},localStorage),c=this.props.redux.tecCollection.filter(function(e){return e.email.match(l.email)})[0],d=[],this.state.notaTecnica&&this.state.anuenciaFile){e.next=12;break}alert("Favor anexar a nota t\xe9cnica e a certid\xe3o de anu\xeancia"),e.next=28;break;case 12:return this.props.loading(!0),e.prev=13,e.next=16,I.a.post("/api/anuenciaUpload",this.state.form).then(function(e){for(var t in e.data.file)d.push({fieldName:e.data.file[t][0].fieldname,id:e.data.file[t][0].id,originalName:e.data.file[t][0].originalname,uploadDate:e.data.file[t][0].uploadDate,contentType:e.data.file[t][0].contentType,fileSize:e.data.file[t][0].size})});case 16:return e.next=18,I.a.put("/api/editProcess",{item:{_id:this.state.selectedId,status:"Processo Anu\xeddo",tecnico:c.name+" "+c.surName},processHistory:{label:"Processo Anu\xeddo",createdAt:new Date,files:d,user:{nome:c.name+" "+c.surName,email:c.email}}});case 18:return e.next=20,_("sucess","Processo Anu\xeddo.");case 20:return e.next=22,se(n.email,r.emailRt,n.nome,i,o,s,"Processo Anu\xeddo.");case 22:setTimeout(function(){m.props.loading(!1),m.props.loadProcessData(),m.props.loadFilesData()},1250),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(13),H(e.t0);case 28:case"end":return e.stop()}},e,this,[[13,25]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a,n=this.props,i=n.clear,o=n.data,s=n.redux,l=n.close,c=n.changeValue;if(o.selectedId&&(e=s.processCollection.filter(function(e){return e._id.match(o.selectedId)})[0])&&(t=s.empCollection.filter(function(t){return t._id.match(e.empId)})[0],a=s.rtCollection.filter(function(t){return t._id.match(e.rtId)})[0]),o.selectedId)return o.showFiles=!0,r.a.createElement("div",{className:"container"},r.a.createElement(Pt,{data:o,redux:s,clear:i,close:l,process:e,empreend:t,rt:a,match:this.props.match,optionSelect:this.optionSelect.bind(this),selectedOption:this.state.selectedOption,divConfig:this.divConfig.bind(this),changeValue:c,log:this.state,showLog:this.showLog.bind(this),clearLog:this.clearLog.bind(this),upload:this.fileUpload.bind(this),submit:this.handleSubmit.bind(this)}))}}]),t}(n.Component),Lt=Object(l.connect)(function(e){return{cadastro:e.cadastro}},function(e){return Object(s.b)({loadProcessData:P,loadFilesData:F,loading:z,reduxToastr:_},e)})(Ft),Mt=function(e){function t(){var e;return Object(G.a)(this,t),(e=Object(J.a)(this,Object(Y.a)(t).call(this))).state={searchValue:"",dataMatch:[],selectedId:"",checked:null,files:[],form:null,diretrizFile:"",showEmpDetails:!1,showRtDetails:!1,empId:"",rtId:"",showFiles:!1,filesCollection:"",analiseProc:{createdAt:"",pendencias:""}},e.escFunction=function(t){e.state.checked||27!==t.keyCode||e.closeDetails()},e}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.redux,t=e.empCollection,a=e.rtCollection,n=e.processCollection,r=e.filesCollection,i=e.tecCollection;t[0]||this.props.loadEmpData(),n[0]||this.props.loadProcessData(),a[0]||this.props.loadRtData(),r[0]||this.props.loadFilesData(),i[0]||this.props.loadTecnicos(),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"handleSearch",value:function(e){this.setState(Object(h.a)({},this.state,{searchValue:e.target.value,checked:!1}))}},{key:"clearSearch",value:function(e){this.setState(Object(h.a)({},this.state,{checked:null,selectedId:null,searchValue:"",showFiles:null}))}},{key:"handleSelect",value:function(e){this.setState(Object(h.a)({},this.state,{selectedId:e.target.value.replace(/,/g,""),checked:e.currentTarget.id}))}},{key:"empDetails",value:function(e){this.setState({showEmpDetails:!0,showRtDetails:!1,empId:e.target.id})}},{key:"rtDetails",value:function(e){this.setState({showEmpDetails:!1,showRtDetails:!0,rtId:e.target.id})}},{key:"closeDetails",value:function(){this.setState({selectedId:null,showEmpDetails:!1,showRtDetails:!1,showFiles:!1,empId:"",rtId:""})}},{key:"showFiles",value:function(e){this.setState({showFiles:!0,selectedId:e.target.id.replace(/z/g,"")})}},{key:"handleChange",value:function(e){var t=e,a=this.state.analiseProc;a.pendencias=t,a.createdAt=new Date,this.setState({analiseProc:a})}},{key:"render",value:function(){var e=this,t=this.state.dataMatch,a=this.state.searchValue.toLowerCase(),n=this.props.redux.processCollection.filter(function(e){return"Aguardando An\xe1lise"===e.status});return n.sort(function(e,t){var a=new Date(e.updatedAt),n=new Date(t.updatedAt);return a&&n?n.getTime()>a.getTime()?1:a.getTime()>n.getTime()?-1:0:null}),t=a&&!this.state.checked?n.filter(function(e){return e.nomeEmpreendimento.toLowerCase().match(a)}):this.state.checked||this.state.checked&&a?n.filter(function(t){return t._id.toLowerCase().match(e.state.selectedId)}):n,r.a.createElement("div",null,r.a.createElement("div",null,this.state.selectedId?this.state.showFiles?r.a.createElement(yt,{data:this.state,redux:this.props.redux,search:function(t){return e.handleSearch(t)},searchArray:t,selectProcess:this.handleSelect.bind(this),setColor:this.props.redux.setColor,clear:this.clearSearch.bind(this),empDetails:this.empDetails.bind(this),rtDetails:this.rtDetails.bind(this),showFiles:this.showFiles.bind(this)}):r.a.createElement("div",null,r.a.createElement(Lt,{data:this.state,redux:this.props.redux,clear:this.clearSearch.bind(this),close:this.closeDetails.bind(this),match:this.props.match,changeValue:this.handleChange.bind(this),showFiles:this.state.showFiles})):r.a.createElement(yt,{data:this.state,redux:this.props.redux,search:function(t){return e.handleSearch(t)},searchArray:t,selectProcess:this.handleSelect.bind(this),setColor:this.props.redux.setColor,clear:this.clearSearch.bind(this),empDetails:this.empDetails.bind(this),rtDetails:this.rtDetails.bind(this),showFiles:this.showFiles.bind(this)}),r.a.createElement(ze,{empId:this.state.empId,rtId:this.state.rtId,showEmp:this.state.showEmpDetails,showRt:this.state.showRtDetails,close:this.closeDetails.bind(this),empCollection:this.props.redux.empCollection,rtCollection:this.props.redux.rtCollection})),r.a.createElement("div",null,r.a.createElement(Et,{selectedId:this.state.selectedId,showFiles:this.state.showFiles,close:this.closeDetails.bind(this),processCollection:this.props.redux.processCollection,filesCollection:this.props.redux.filesCollection})),"}")}}]),t}(n.Component);var _t=Object(l.connect)(function(e){return{redux:e.cadastro}},function(e){return Object(s.b)({loadEmpData:R,loadRtData:j,loadProcessData:P,loadTecnicos:L,loadFilesData:F,reduxToastr:_},e)})(Mt),zt=a(113);function Bt(e){return{type:"LOGIN",payload:e}}function Ut(e){return localStorage.setItem("verified",e),{type:"VERIFY",payload:e}}function Vt(){return{type:"GET_USERS",payload:I.a.get("/api/users").then(function(e){return e.data}).catch(function(e){return console.log(e)})}}var qt=function(e){var t=e.id,a=e.presentValue,n=e.handleChange,i=e.municipio;return r.a.createElement("select",{id:t,className:"browser-default",onChange:n},r.a.createElement("option",{value:a},a),r.a.createElement("option",{value:"admin"},"Administrador"),r.a.createElement("option",{value:"tecnico"},"T\xe9cnico da Ag\xeancia"),r.a.createElement("option",{value:"prefeitura"},"Prefeitura de ".concat(i)),r.a.createElement("option",{value:"empreend"},"Empreendedor"),r.a.createElement("option",{value:"rt"},"Respons\xe1vel T\xe9cnico"))},Ht=function(e){var t=e.users,a=e.handleChange,n=e.editUsers,i=e.deleteUser;return r.a.createElement("div",null,r.a.createElement("table",{className:"resposive-table highlight"},r.a.createElement("thead",null,r.a.createElement("tr",null,["Usu\xe1rio","E-mail","Munic\xedpio"].map(function(e,t){return r.a.createElement("th",{key:t},e)}),["Permiss\xf5es","Verificado"].map(function(e,t){return r.a.createElement("th",{key:t,className:"center"},e)}))),r.a.createElement("tbody",null,t[0]?t.map(function(e,t){return r.a.createElement("tr",{id:e._id,key:t,style:{borderBottom:"1px solid #eee"}},r.a.createElement("td",null,e.name," ",e.surName),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.municipio||""),r.a.createElement("td",null,r.a.createElement(qt,{id:e._id,presentValue:e.role,handleChange:a,municipio:e.municipio})),r.a.createElement("td",{className:"center",style:{paddingLeft:"3%"}},r.a.createElement("input",{id:"v_".concat(e._id),name:"v_",type:"checkbox",checked:e.verified?"checked":"",onChange:a}),r.a.createElement("label",{htmlFor:"v_".concat(e._id)}),r.a.createElement("i",{id:"d_".concat(e._id),className:"material-icons red-text click",onClick:i,title:"Apagar"},"delete_outlined"),r.a.createElement("label",{htmlFor:"d_".concat(e._id)})))}):r.a.createElement("tr",null),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",{className:"center"},r.a.createElement("i",{style:{color:"teal"},onClick:n,title:"Salvar",className:"material-icons small click"},"save"))))))},Gt=function(e){function t(){var e,a;Object(G.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(J.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={users:[]},a}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=Object(V.a)(U.a.mark(function e(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getUsers();case 2:this.setState({users:this.props.auth.usersCollection});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t,a=this.state.users,n=e.target.name,r=[];a.forEach(function(e){e.name,e.surName,e.email,e.municipio,e.password,e.__v;var t=Object(zt.a)(e,["name","surName","email","municipio","password","__v"]);r.push(t)}),t=a.filter(function(t){return"".concat(n+t._id).match(e.target.id)})[0];var i=a.indexOf(t);"v_"!==e.target.name?a[i].role=e.target.value:a[i].verified=!a[i].verified,this.setState({users:a})}},{key:"editUsers",value:function(){var e=Object(V.a)(U.a.mark(function e(t){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.put("/api/edit",{el:"user",item:this.state.users}).then(function(e){return console.log(e)}).catch(function(e){return alert(e)});case 2:this.props.getUsers(),_("sucess","Registro alterado.");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.id.replace("d_",""),n=this.state.users.filter(function(e){return e._id.match(a)})[0],!window.confirm("Excluir ".concat(n.name," ").concat(n.surName,"?"))){e.next=8;break}return e.next=5,I.a.delete("/api/delete/item?id=".concat(a,"&el=user")).catch(function(e){return console.log(e)});case 5:return e.next=7,this.props.getUsers();case 7:this.setState({users:this.props.auth.usersCollection});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.users;return r.a.createElement("div",{className:"container",style:{width:"95%"}},r.a.createElement("div",null,r.a.createElement(ve,{title:"Gerenciar Usu\xe1rios",subtitle:"Crie, remova ou edite as permiss\xf5es/confirma\xe7\xf5es de cada usu\xe1rio do sistema. ",color:this.props.redux.setColor})),r.a.createElement(Ht,{users:e,handleChange:this.handleChange.bind(this),deleteUser:this.deleteUser.bind(this),editUsers:this.editUsers.bind(this)}))}}]),t}(n.Component);var Wt=Object(l.connect)(function(e){return{redux:e.cadastro,auth:e.auth}},function(e){return Object(s.b)({getUsers:Vt,reduxToastr:_},e)})(Gt),Jt=Object(w.a)(Object(l.connect)(function(e){return Object(s.b)({reduxToastr:_},e)})(function(){var e=localStorage.getItem("role"),t="admin"===e||"prefeitura"===e,a="admin"===e||"tecnico"===e;return document.cookie.match("_sim-ad")?r.a.createElement(k.a,null,r.a.createElement(D.a,{path:"/",exact:!0,component:re}),t&&r.a.createElement(D.a,{path:"/cadastro",component:Oe}),t&&r.a.createElement(D.a,{path:"/solicitaDiretriz",component:rt}),a&&r.a.createElement(D.a,{path:"/diretrizes",component:ft}),t&&r.a.createElement(D.a,{path:"/solicitaAnuencia",component:Nt}),r.a.createElement(D.a,{path:"/showEmpreend",component:Ze}),a&&r.a.createElement(D.a,{path:"/Anuencia",exact:!0,component:_t}),a&&r.a.createElement(D.a,{path:"/editData",component:Ve}),"admin"===e&&r.a.createElement(D.a,{path:"/users",exact:!0,component:Wt})):(H(),r.a.createElement("h5",{style:{marginTop:"25%"}},"Sess\xe3o expirada!"))})),Yt=(a(309),[{endPoint:"/cadastro",label:"Cadastro"},{endPoint:"/solicitaDiretriz",label:"Solicitar Diretrizes Metropolitanas",item:"Processo cadastrado"},{endPoint:"/solicitaAnuencia",label:"Solicitar Anu\xeancia Pr\xe9via",item:"Diretrizes Metropolitanas emitidas"},{endPoint:"/showEmpreend",label:"Consultar Processos"}]),Xt=[{endPoint:"/diretrizes",label:"Diretrizes Metropolitanas",item:"Aguardando Diretrizes Metropolitanas"},{endPoint:"/Anuencia",label:"Analisar Processo",item:"Aguardando An\xe1lise"},{endPoint:"/showEmpreend",label:"Consultar Processos"}],Kt=[Yt[0],Yt[1],Xt[0],Yt[2],Xt[1],{endPoint:"/showEmpreend",label:"Gerenciar Dados"}],Qt=[{endPoint:"/showEmpreend",label:"Consultar Processos"}],Zt=function(e){var t=e.item,a=e.processo;if(a&&a.length>0){var n=a.filter(function(e){return e.status.match(t)}).length;return"Diretrizes Metropolitanas emitidas"===t&&(n+=a.filter(function(e){return e.status.match("Pend\xeancias")}).length+a.filter(function(e){return e.status.match("Aguardando documenta\xe7\xe3o")}).length),r.a.createElement("div",{style:{display:"inline-block"}},n>0?r.a.createElement("sup",{style:{fontSize:"0.9em",borderRadius:"50%",padding:"0px 5px",backgroundColor:"red",fontWeight:"900"}},n):0===n?r.a.createElement("sup",null," "):null)}return null},$t=function(e){function t(){return Object(G.a)(this,t),Object(J.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentWillMount",value:function(){this.props.setColor()}},{key:"render",value:function(){var e=this.props,t=e.processo,a=e.color,n=localStorage.getItem("role");return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper",style:{paddingLeft:30,paddingRight:30,backgroundColor:a},id:"setcolor"},r.a.createElement(Q.a,{to:"/",className:"brand-logo"},r.a.createElement("i",{className:"material-icons",style:{fontSize:"30px"}},"home")),r.a.createElement(Q.a,{to:"","data-activates":"mobile-demo",className:"button-collapse"},r.a.createElement("i",{className:"material-icons"},"menu")),[{className:"right hide-on-med-and-down",id:""},{className:"side-nav",id:"mobile-demo"}].map(function(e,a){return r.a.createElement("ul",{className:e.className,id:e.id,key:a},function(e){switch(e){case"prefeitura":return Yt;case"tecnico":return Xt;case"admin":return Kt;case"empreend":case"rt":return Qt;default:return}}(n).map(function(e,a){return r.a.createElement("li",{key:a+100},r.a.createElement(Q.a,{to:e.endPoint},e.label,e.item?r.a.createElement(Zt,{processo:t,item:e.item}):r.a.createElement("span",null)))}),"admin"===n&&r.a.createElement("li",null,r.a.createElement(Q.a,{to:"/users"},r.a.createElement("i",{className:"material-icons left"},"person"))),r.a.createElement("li",null,r.a.createElement(Q.a,{to:"/"},r.a.createElement("i",{className:"material-icons left",onClick:function(){return H()},title:"Sair"},"logout"))))})))}}]),t}(n.Component),ea=Object(l.connect)(function(e){return{processo:e.cadastro.processCollection,color:e.cadastro.setColor}},function(e){return Object(s.b)({setColor:M},e)})($t),ta=a(112),aa=function(e){return r.a.createElement("div",null,r.a.createElement("h4",{className:"header2"},e.title),r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:e.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("i",{className:"mdi-communication-email prefix"}),r.a.createElement("input",{name:"email",type:"email",className:"validate",placeholder:"",onChange:e.handleChange}),r.a.createElement("label",{htmlFor:"email"},"E-mail"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("i",{className:"mdi-action-lock-outline prefix"}),r.a.createElement("input",{name:"password",type:"password",className:"validate",placeholder:"",onChange:e.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Senha"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("button",{className:"btn cyan waves-effect waves-light right",type:"submit",name:"action",style:{backgroundColor:"transparent"}},"Entrar"))))))},na=[{name:"name",className:"mdi-action-account-circle prefix",label:"Nome"},{name:"surName",className:"mdi-action-account-circle prefix",label:"Sobrenome"},{name:"email",className:"mdi-communication-email prefix",label:"E-mail"},{name:"municipio",className:"mdi-action-account-circle prefix",label:"Munic\xedpio"},{name:"password",className:"mdi-action-lock-outline prefix",label:"Senha"},{name:"confirmPassword",className:"mdi-action-lock-outline prefix",label:"Confirme sua senha"}],ra=function(e){var t=e.handleChange,a=e.handleSubmit;return r.a.createElement("div",null,r.a.createElement("h4",{className:"header2"},e.title),r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:a},na.map(function(e,a){return r.a.createElement("div",{className:"row",key:a},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("i",{className:e.className}),r.a.createElement("input",{name:e.name,type:"confirmPassword"===e.name?"password":"email"===e.name||"password"===e.name?e.name:"text",className:"validate",onChange:t}),r.a.createElement("label",{htmlFor:e.name},e.label)))}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("button",{className:"btn cyan waves-effect waves-light right",type:"submit",name:"action",style:{backgroundColor:"transparent"}},"Cadastrar"))))))},ia=function(e){function t(){var e,a;Object(G.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(J.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={registered:!0,name:"",email:"",password:"",confirmPassword:"",role:"",municipio:""},a}return Object(X.a)(t,e),Object(W.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(ie.a)({},e.target.name,e.target.value))}},{key:"login",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a,n,r,i,o,s,l,c;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,I.a.post("/api/login",{email:this.state.email,password:this.state.password}).then(function(e){return a=e.data}).catch(function(e){return _("Erro","Usu\xe1rio/senha invalidos."),null});case 3:if("Aguardando verifica\xe7\xe3o do usu\xe1rio."!==a){e.next=9;break}return e.next=6,localStorage.setItem("verified",!1);case 6:return this.props.login(!0),this.props.verify(!1),e.abrupt("return",null);case 9:return n=function(){return!!document.cookie.match("_sim-ad=","")},e.next=12,localStorage.setItem("login",n());case 12:if(a){e.next=14;break}return e.abrupt("return");case 14:if(!a.verified){e.next=29;break}r=Object.entries(a),i=0;case 17:if(!(i<r.length)){e.next=27;break}return o=r[i],s=Object(ta.a)(o,2),l=s[0],c=s[1],e.next=24,localStorage.setItem(l,c);case 24:i++,e.next=17;break;case 27:this.props.login(!0),this.props.verify(!0);case 29:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(V.a)(U.a.mark(function e(t){var a;return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,I.a.post("/api/signup",this.state).then(function(e){"Senhas n\xe3o conferem."===e.data||"Usu\xe1rio j\xe1 cadastrado."===e.data||"E-mail inv\xe1lido."===e.data?_("err",e.data):(a=e.data,_("sucess","Usu\xe1rio criado com sucesso",a.name),setTimeout(function(){window.location.reload()},2e3))}).catch(function(e){return console.log(e.message)});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.registered;return r.a.createElement("div",null,r.a.createElement("div",{className:"container col s12 m12 l6",style:{marginTop:"1%"}},r.a.createElement("img",{src:"/images/ad_login.png",className:"z-depth-2",alt:""}),r.a.createElement("div",{className:"card-panel"},t?r.a.createElement(aa,{title:"Entre no sistema",values:this.state,handleChange:this.handleChange.bind(this),handleSubmit:this.login.bind(this)}):r.a.createElement(ra,{title:"Cadastre-se",values:this.state,handleChange:this.handleChange.bind(this),handleSubmit:this.signup.bind(this)})),t&&r.a.createElement("p",{className:"link right",onClick:function(){return e.setState({registered:!1})}}," N\xe3o possui usu\xe1rio e senha? Cadastre-se."),!t&&r.a.createElement("p",{className:"link right",onClick:function(){return e.setState({registered:!0})}}," J\xe1 \xe9 cadastrado? Fa\xe7a o login.")))}}]),t}(n.Component),oa=Object(l.connect)(function(e){return{}},function(e){return Object(s.b)({login:Bt,verify:Ut,reduxToastr:_},e)})(ia),sa=function(){return r.a.createElement("div",{style:{position:"fixed",top:"40%",right:"15%",left:"15%",height:"50%",marginBottom:"25px",marginTop:"25px",textAlign:"center",zIndex:1}},r.a.createElement("img",{src:"/images/loading.gif",alt:"",height:"60px",width:"60px"}))},la=function(){return r.a.createElement("div",{className:"container col s12 m12 l6",style:{marginTop:"1%"}},r.a.createElement("img",{src:"/images/ad_login.png",className:"z-depth-2",alt:""}),r.a.createElement("div",{style:{marginTop:"4%",textAlign:"center"}},r.a.createElement("div",{className:"card-panel"},r.a.createElement("h5",null,"Aguardando verifica\xe7\xe3o do usu\xe1rio.")," ",r.a.createElement("br",null),r.a.createElement("button",{className:"btn blue",onClick:function(){return window.location.reload()}},"Voltar"))))},ca=Object(l.connect)(function(e){return{auth:e.auth,render:e.cadastro}})(function(e){var t=e.render.loading;return document.cookie&&localStorage.getItem("verified")?r.a.createElement("div",null,r.a.createElement(S.a,null,r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(ea,null)),r.a.createElement(Jt,null))),r.a.createElement(O,null),t&&r.a.createElement(sa,null)):e.auth.login?r.a.createElement(la,null):r.a.createElement("div",null,r.a.createElement(oa,null))}),da=Object(s.a)(d.a,u.a,p.a)(s.d);o.a.render(r.a.createElement(function(){return r.a.createElement(l.Provider,{store:da(x)},r.a.createElement(ca,null),r.a.createElement(O,null))},null),document.getElementById("root"))},82:function(e,t,a){}},[[114,1,2]]]);
//# sourceMappingURL=main.92254807.chunk.js.map